/*! For license information please see admin.js.LICENSE.txt */
(()=>{var t={24:(t,e,n)=>{var r=n(735).default;function o(){"use strict";t.exports=o=function(){return n},t.exports.__esModule=!0,t.exports.default=t.exports;var e,n={},i=Object.prototype,a=i.hasOwnProperty,c=Object.defineProperty||function(t,e,n){t[e]=n.value},s="function"==typeof Symbol?Symbol:{},u=s.iterator||"@@iterator",l=s.asyncIterator||"@@asyncIterator",f=s.toStringTag||"@@toStringTag";function h(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{h({},"")}catch(e){h=function(t,e,n){return t[e]=n}}function p(t,e,n,r){var o=e&&e.prototype instanceof _?e:_,i=Object.create(o.prototype),a=new F(r||[]);return c(i,"_invoke",{value:k(t,n,a)}),i}function d(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}n.wrap=p;var v="suspendedStart",g="suspendedYield",m="executing",y="completed",b={};function _(){}function j(){}function x(){}var w={};h(w,u,(function(){return this}));var O=Object.getPrototypeOf,E=O&&O(O(I([])));E&&E!==i&&a.call(E,u)&&(w=E);var A=x.prototype=_.prototype=Object.create(w);function P(t){["next","throw","return"].forEach((function(e){h(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function n(o,i,c,s){var u=d(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==r(f)&&a.call(f,"__await")?e.resolve(f.__await).then((function(t){n("next",t,c,s)}),(function(t){n("throw",t,c,s)})):e.resolve(f).then((function(t){l.value=t,c(l)}),(function(t){return n("throw",t,c,s)}))}s(u.arg)}var o;c(this,"_invoke",{value:function(t,r){function i(){return new e((function(e,o){n(t,r,e,o)}))}return o=o?o.then(i,i):i()}})}function k(t,n,r){var o=v;return function(i,a){if(o===m)throw Error("Generator is already running");if(o===y){if("throw"===i)throw a;return{value:e,done:!0}}for(r.method=i,r.arg=a;;){var c=r.delegate;if(c){var s=C(c,r);if(s){if(s===b)continue;return s}}if("next"===r.method)r.sent=r._sent=r.arg;else if("throw"===r.method){if(o===v)throw o=y,r.arg;r.dispatchException(r.arg)}else"return"===r.method&&r.abrupt("return",r.arg);o=m;var u=d(t,n,r);if("normal"===u.type){if(o=r.done?y:g,u.arg===b)continue;return{value:u.arg,done:r.done}}"throw"===u.type&&(o=y,r.method="throw",r.arg=u.arg)}}}function C(t,n){var r=n.method,o=t.iterator[r];if(o===e)return n.delegate=null,"throw"===r&&t.iterator.return&&(n.method="return",n.arg=e,C(t,n),"throw"===n.method)||"return"!==r&&(n.method="throw",n.arg=new TypeError("The iterator does not provide a '"+r+"' method")),b;var i=d(o,t.iterator,n.arg);if("throw"===i.type)return n.method="throw",n.arg=i.arg,n.delegate=null,b;var a=i.arg;return a?a.done?(n[t.resultName]=a.value,n.next=t.nextLoc,"return"!==n.method&&(n.method="next",n.arg=e),n.delegate=null,b):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,b)}function L(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function N(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function F(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(L,this),this.reset(!0)}function I(t){if(t||""===t){var n=t[u];if(n)return n.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function n(){for(;++o<t.length;)if(a.call(t,o))return n.value=t[o],n.done=!1,n;return n.value=e,n.done=!0,n};return i.next=i}}throw new TypeError(r(t)+" is not iterable")}return j.prototype=x,c(A,"constructor",{value:x,configurable:!0}),c(x,"constructor",{value:j,configurable:!0}),j.displayName=h(x,f,"GeneratorFunction"),n.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===j||"GeneratorFunction"===(e.displayName||e.name))},n.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,x):(t.__proto__=x,h(t,f,"GeneratorFunction")),t.prototype=Object.create(A),t},n.awrap=function(t){return{__await:t}},P(S.prototype),h(S.prototype,l,(function(){return this})),n.AsyncIterator=S,n.async=function(t,e,r,o,i){void 0===i&&(i=Promise);var a=new S(p(t,e,r,o),i);return n.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},P(A),h(A,f,"Generator"),h(A,u,(function(){return this})),h(A,"toString",(function(){return"[object Generator]"})),n.keys=function(t){var e=Object(t),n=[];for(var r in e)n.push(r);return n.reverse(),function t(){for(;n.length;){var r=n.pop();if(r in e)return t.value=r,t.done=!1,t}return t.done=!0,t}},n.values=I,F.prototype={constructor:F,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(N),!t)for(var n in this)"t"===n.charAt(0)&&a.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var n=this;function r(r,o){return c.type="throw",c.arg=t,n.next=r,o&&(n.method="next",n.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var s=a.call(i,"catchLoc"),u=a.call(i,"finallyLoc");if(s&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var n=this.tryEntries.length-1;n>=0;--n){var r=this.tryEntries[n];if(r.tryLoc<=this.prev&&a.call(r,"finallyLoc")&&this.prev<r.finallyLoc){var o=r;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,b):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),b},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),N(n),b}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;N(n)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,n,r){return this.delegate={iterator:I(t),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=e),b}},n}t.exports=o,t.exports.__esModule=!0,t.exports.default=t.exports},735:t=>{function e(n){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(n)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},183:(t,e,n)=>{var r=n(24)();t.exports=r;try{regeneratorRuntime=r}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=r:Function("r","regeneratorRuntime = r")(r)}}},e={};function n(r){var o=e[r];if(void 0!==o)return o.exports;var i=e[r]={exports:{}};return t[r](i,i.exports,n),i.exports}n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";const t=flarum.core.compat["admin/app"];var e=n.n(t);function r(){return r=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)({}).hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},r.apply(null,arguments)}function o(t,e){return o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},o(t,e)}function i(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,o(t,e)}const a=flarum.core.compat["admin/components/ExtensionPage"];var c=n.n(a);const s=flarum.core.compat["common/components/Button"];var u=n.n(s);const l=flarum.core.compat["common/utils/Stream"];var f=n.n(l);const h=flarum.core.compat["common/app"];var p=n.n(h),d=function(t){return t.SIGNUP="signup",t.LOGIN="login",t.FORGOT="forgot",t}({});const v=function(t,e){for(var n=-1,r=null==t?0:t.length,o=Array(r);++n<r;)o[n]=e(t[n],n,t);return o},g=function(t,e){return t===e||t!=t&&e!=e},y=function(t,e){for(var n=t.length;n--;)if(g(t[n][0],e))return n;return-1};var b=Array.prototype.splice;function _(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}_.prototype.clear=function(){this.__data__=[],this.size=0},_.prototype.delete=function(t){var e=this.__data__,n=y(e,t);return!(n<0||(n==e.length-1?e.pop():b.call(e,n,1),--this.size,0))},_.prototype.get=function(t){var e=this.__data__,n=y(e,t);return n<0?void 0:e[n][1]},_.prototype.has=function(t){return y(this.__data__,t)>-1},_.prototype.set=function(t,e){var n=this.__data__,r=y(n,t);return r<0?(++this.size,n.push([t,e])):n[r][1]=e,this};const j=_,x="object"==typeof global&&global&&global.Object===Object&&global;var w="object"==typeof self&&self&&self.Object===Object&&self;const O=x||w||Function("return this")(),E=O.Symbol;var A=Object.prototype,P=A.hasOwnProperty,S=A.toString,k=E?E.toStringTag:void 0;var C=Object.prototype.toString;var L=E?E.toStringTag:void 0;const N=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":L&&L in Object(t)?function(t){var e=P.call(t,k),n=t[k];try{t[k]=void 0;var r=!0}catch(t){}var o=S.call(t);return r&&(e?t[k]=n:delete t[k]),o}(t):function(t){return C.call(t)}(t)},F=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},I=function(t){if(!F(t))return!1;var e=N(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},T=O["__core-js_shared__"];var B,z=(B=/[^.]+$/.exec(T&&T.keys&&T.keys.IE_PROTO||""))?"Symbol(src)_1."+B:"";var M=Function.prototype.toString;const R=function(t){if(null!=t){try{return M.call(t)}catch(t){}try{return t+""}catch(t){}}return""};var U=/^\[object .+?Constructor\]$/,D=Function.prototype,V=Object.prototype,G=D.toString,$=V.hasOwnProperty,Z=RegExp("^"+G.call($).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const X=function(t){return!(!F(t)||(e=t,z&&z in e))&&(I(t)?Z:U).test(R(t));var e},H=function(t,e){var n=function(t,e){return null==t?void 0:t[e]}(t,e);return X(n)?n:void 0},q=H(O,"Map"),W=H(Object,"create");var Y=Object.prototype.hasOwnProperty;var J=Object.prototype.hasOwnProperty;function K(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}K.prototype.clear=function(){this.__data__=W?W(null):{},this.size=0},K.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},K.prototype.get=function(t){var e=this.__data__;if(W){var n=e[t];return"__lodash_hash_undefined__"===n?void 0:n}return Y.call(e,t)?e[t]:void 0},K.prototype.has=function(t){var e=this.__data__;return W?void 0!==e[t]:J.call(e,t)},K.prototype.set=function(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=W&&void 0===e?"__lodash_hash_undefined__":e,this};const Q=K,tt=function(t,e){var n,r,o=t.__data__;return("string"==(r=typeof(n=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==n:null===n)?o["string"==typeof e?"string":"hash"]:o.map};function et(t){var e=-1,n=null==t?0:t.length;for(this.clear();++e<n;){var r=t[e];this.set(r[0],r[1])}}et.prototype.clear=function(){this.size=0,this.__data__={hash:new Q,map:new(q||j),string:new Q}},et.prototype.delete=function(t){var e=tt(this,t).delete(t);return this.size-=e?1:0,e},et.prototype.get=function(t){return tt(this,t).get(t)},et.prototype.has=function(t){return tt(this,t).has(t)},et.prototype.set=function(t,e){var n=tt(this,t),r=n.size;return n.set(t,e),this.size+=n.size==r?0:1,this};const nt=et;function rt(t){var e=this.__data__=new j(t);this.size=e.size}rt.prototype.clear=function(){this.__data__=new j,this.size=0},rt.prototype.delete=function(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n},rt.prototype.get=function(t){return this.__data__.get(t)},rt.prototype.has=function(t){return this.__data__.has(t)},rt.prototype.set=function(t,e){var n=this.__data__;if(n instanceof j){var r=n.__data__;if(!q||r.length<199)return r.push([t,e]),this.size=++n.size,this;n=this.__data__=new nt(r)}return n.set(t,e),this.size=n.size,this};const ot=rt,it=function(){try{var t=H(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),at=function(t,e,n){"__proto__"==e&&it?it(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n};var ct=Object.prototype.hasOwnProperty;const st=function(t,e,n){var r=t[e];ct.call(t,e)&&g(r,n)&&(void 0!==n||e in t)||at(t,e,n)},ut=function(t,e,n,r){var o=!n;n||(n={});for(var i=-1,a=e.length;++i<a;){var c=e[i],s=r?r(n[c],t[c],c,n,t):void 0;void 0===s&&(s=t[c]),o?at(n,c,s):st(n,c,s)}return n},lt=function(t){return null!=t&&"object"==typeof t},ft=function(t){return lt(t)&&"[object Arguments]"==N(t)};var ht=Object.prototype,pt=ht.hasOwnProperty,dt=ht.propertyIsEnumerable;const vt=ft(function(){return arguments}())?ft:function(t){return lt(t)&&pt.call(t,"callee")&&!dt.call(t,"callee")},gt=Array.isArray;var mt="object"==typeof exports&&exports&&!exports.nodeType&&exports,yt=mt&&"object"==typeof module&&module&&!module.nodeType&&module,bt=yt&&yt.exports===mt?O.Buffer:void 0;const _t=(bt?bt.isBuffer:void 0)||function(){return!1};var jt=/^(?:0|[1-9]\d*)$/;const xt=function(t,e){var n=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==n||"symbol"!=n&&jt.test(t))&&t>-1&&t%1==0&&t<e},wt=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991};var Ot={};Ot["[object Float32Array]"]=Ot["[object Float64Array]"]=Ot["[object Int8Array]"]=Ot["[object Int16Array]"]=Ot["[object Int32Array]"]=Ot["[object Uint8Array]"]=Ot["[object Uint8ClampedArray]"]=Ot["[object Uint16Array]"]=Ot["[object Uint32Array]"]=!0,Ot["[object Arguments]"]=Ot["[object Array]"]=Ot["[object ArrayBuffer]"]=Ot["[object Boolean]"]=Ot["[object DataView]"]=Ot["[object Date]"]=Ot["[object Error]"]=Ot["[object Function]"]=Ot["[object Map]"]=Ot["[object Number]"]=Ot["[object Object]"]=Ot["[object RegExp]"]=Ot["[object Set]"]=Ot["[object String]"]=Ot["[object WeakMap]"]=!1;const Et=function(t){return function(e){return t(e)}};var At="object"==typeof exports&&exports&&!exports.nodeType&&exports,Pt=At&&"object"==typeof module&&module&&!module.nodeType&&module,St=Pt&&Pt.exports===At&&x.process;const kt=function(){try{return Pt&&Pt.require&&Pt.require("util").types||St&&St.binding&&St.binding("util")}catch(t){}}();var Ct=kt&&kt.isTypedArray;const Lt=Ct?Et(Ct):function(t){return lt(t)&&wt(t.length)&&!!Ot[N(t)]};var Nt=Object.prototype.hasOwnProperty;const Ft=function(t,e){var n=gt(t),r=!n&&vt(t),o=!n&&!r&&_t(t),i=!n&&!r&&!o&&Lt(t),a=n||r||o||i,c=a?function(t,e){for(var n=-1,r=Array(t);++n<t;)r[n]=e(n);return r}(t.length,String):[],s=c.length;for(var u in t)!e&&!Nt.call(t,u)||a&&("length"==u||o&&("offset"==u||"parent"==u)||i&&("buffer"==u||"byteLength"==u||"byteOffset"==u)||xt(u,s))||c.push(u);return c};var It=Object.prototype;const Tt=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||It)},Bt=function(t,e){return function(n){return t(e(n))}},zt=Bt(Object.keys,Object);var Mt=Object.prototype.hasOwnProperty;const Rt=function(t){return null!=t&&wt(t.length)&&!I(t)},Ut=function(t){return Rt(t)?Ft(t):function(t){if(!Tt(t))return zt(t);var e=[];for(var n in Object(t))Mt.call(t,n)&&"constructor"!=n&&e.push(n);return e}(t)};var Dt=Object.prototype.hasOwnProperty;const Vt=function(t){if(!F(t))return function(t){var e=[];if(null!=t)for(var n in Object(t))e.push(n);return e}(t);var e=Tt(t),n=[];for(var r in t)("constructor"!=r||!e&&Dt.call(t,r))&&n.push(r);return n},Gt=function(t){return Rt(t)?Ft(t,!0):Vt(t)};var $t="object"==typeof exports&&exports&&!exports.nodeType&&exports,Zt=$t&&"object"==typeof module&&module&&!module.nodeType&&module,Xt=Zt&&Zt.exports===$t?O.Buffer:void 0,Ht=Xt?Xt.allocUnsafe:void 0;const qt=function(){return[]};var Wt=Object.prototype.propertyIsEnumerable,Yt=Object.getOwnPropertySymbols;const Jt=Yt?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var n=-1,r=null==t?0:t.length,o=0,i=[];++n<r;){var a=t[n];e(a,n,t)&&(i[o++]=a)}return i}(Yt(t),(function(e){return Wt.call(t,e)})))}:qt,Kt=function(t,e){for(var n=-1,r=e.length,o=t.length;++n<r;)t[o+n]=e[n];return t},Qt=Bt(Object.getPrototypeOf,Object),te=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)Kt(e,Jt(t)),t=Qt(t);return e}:qt,ee=function(t,e,n){var r=e(t);return gt(t)?r:Kt(r,n(t))},ne=function(t){return ee(t,Ut,Jt)},re=function(t){return ee(t,Gt,te)},oe=H(O,"DataView"),ie=H(O,"Promise"),ae=H(O,"Set"),ce=H(O,"WeakMap");var se="[object Map]",ue="[object Promise]",le="[object Set]",fe="[object WeakMap]",he="[object DataView]",pe=R(oe),de=R(q),ve=R(ie),ge=R(ae),me=R(ce),ye=N;(oe&&ye(new oe(new ArrayBuffer(1)))!=he||q&&ye(new q)!=se||ie&&ye(ie.resolve())!=ue||ae&&ye(new ae)!=le||ce&&ye(new ce)!=fe)&&(ye=function(t){var e=N(t),n="[object Object]"==e?t.constructor:void 0,r=n?R(n):"";if(r)switch(r){case pe:return he;case de:return se;case ve:return ue;case ge:return le;case me:return fe}return e});const be=ye;var _e=Object.prototype.hasOwnProperty;const je=O.Uint8Array,xe=function(t){var e=new t.constructor(t.byteLength);return new je(e).set(new je(t)),e};var we=/\w*$/;var Oe=E?E.prototype:void 0,Ee=Oe?Oe.valueOf:void 0;const Ae=function(t,e,n){var r,o,i,a=t.constructor;switch(e){case"[object ArrayBuffer]":return xe(t);case"[object Boolean]":case"[object Date]":return new a(+t);case"[object DataView]":return function(t,e){var n=e?xe(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}(t,n);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(t,e){var n=e?xe(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}(t,n);case"[object Map]":case"[object Set]":return new a;case"[object Number]":case"[object String]":return new a(t);case"[object RegExp]":return(i=new(o=t).constructor(o.source,we.exec(o))).lastIndex=o.lastIndex,i;case"[object Symbol]":return r=t,Ee?Object(Ee.call(r)):{}}};var Pe=Object.create;const Se=function(){function t(){}return function(e){if(!F(e))return{};if(Pe)return Pe(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();var ke=kt&&kt.isMap;const Ce=ke?Et(ke):function(t){return lt(t)&&"[object Map]"==be(t)};var Le=kt&&kt.isSet;const Ne=Le?Et(Le):function(t){return lt(t)&&"[object Set]"==be(t)};var Fe="[object Arguments]",Ie="[object Function]",Te="[object Object]",Be={};Be[Fe]=Be["[object Array]"]=Be["[object ArrayBuffer]"]=Be["[object DataView]"]=Be["[object Boolean]"]=Be["[object Date]"]=Be["[object Float32Array]"]=Be["[object Float64Array]"]=Be["[object Int8Array]"]=Be["[object Int16Array]"]=Be["[object Int32Array]"]=Be["[object Map]"]=Be["[object Number]"]=Be[Te]=Be["[object RegExp]"]=Be["[object Set]"]=Be["[object String]"]=Be["[object Symbol]"]=Be["[object Uint8Array]"]=Be["[object Uint8ClampedArray]"]=Be["[object Uint16Array]"]=Be["[object Uint32Array]"]=!0,Be["[object Error]"]=Be[Ie]=Be["[object WeakMap]"]=!1;const ze=function t(e,n,r,o,i,a){var c,s=1&n,u=2&n,l=4&n;if(r&&(c=i?r(e,o,i,a):r(e)),void 0!==c)return c;if(!F(e))return e;var f=gt(e);if(f){if(c=function(t){var e=t.length,n=new t.constructor(e);return e&&"string"==typeof t[0]&&_e.call(t,"index")&&(n.index=t.index,n.input=t.input),n}(e),!s)return function(t,e){var n=-1,r=t.length;for(e||(e=Array(r));++n<r;)e[n]=t[n];return e}(e,c)}else{var h=be(e),p=h==Ie||"[object GeneratorFunction]"==h;if(_t(e))return function(t,e){if(e)return t.slice();var n=t.length,r=Ht?Ht(n):new t.constructor(n);return t.copy(r),r}(e,s);if(h==Te||h==Fe||p&&!i){if(c=u||p?{}:function(t){return"function"!=typeof t.constructor||Tt(t)?{}:Se(Qt(t))}(e),!s)return u?function(t,e){return ut(t,te(t),e)}(e,function(t,e){return t&&ut(e,Gt(e),t)}(c,e)):function(t,e){return ut(t,Jt(t),e)}(e,function(t,e){return t&&ut(e,Ut(e),t)}(c,e))}else{if(!Be[h])return i?e:{};c=Ae(e,h,s)}}a||(a=new ot);var d=a.get(e);if(d)return d;a.set(e,c),Ne(e)?e.forEach((function(o){c.add(t(o,n,r,o,e,a))})):Ce(e)&&e.forEach((function(o,i){c.set(i,t(o,n,r,i,e,a))}));var v=f?void 0:(l?u?re:ne:u?Gt:Ut)(e);return function(t,e){for(var n=-1,r=null==t?0:t.length;++n<r&&!1!==e(t[n],n,t););}(v||e,(function(o,i){v&&(o=e[i=o]),st(c,i,t(o,n,r,i,e,a))})),c},Me=function(t){return"symbol"==typeof t||lt(t)&&"[object Symbol]"==N(t)};var Re=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ue=/^\w*$/;function De(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var n=function n(){var r=arguments,o=e?e.apply(this,r):r[0],i=n.cache;if(i.has(o))return i.get(o);var a=t.apply(this,r);return n.cache=i.set(o,a)||i,a};return n.cache=new(De.Cache||nt),n}De.Cache=nt;var Ve=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ge=/\\(\\)?/g;const $e=(Ze=De((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Ve,(function(t,n,r,o){e.push(r?o.replace(Ge,"$1"):n||t)})),e}),(function(t){return 500===Xe.size&&Xe.clear(),t})),Xe=Ze.cache,Ze);var Ze,Xe,He=E?E.prototype:void 0,qe=He?He.toString:void 0;const We=function t(e){if("string"==typeof e)return e;if(gt(e))return v(e,t)+"";if(Me(e))return qe?qe.call(e):"";var n=e+"";return"0"==n&&1/e==-1/0?"-0":n},Ye=function(t){return null==t?"":We(t)},Je=function(t,e){return gt(t)?t:function(t,e){if(gt(t))return!1;var n=typeof t;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=t&&!Me(t))||Ue.test(t)||!Re.test(t)||null!=e&&t in Object(e)}(t,e)?[t]:$e(Ye(t))},Ke=function(t){if("string"==typeof t||Me(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e},Qe=function(t,e,n){var r=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(n=n>o?o:n)<0&&(n+=o),o=e>n?0:n-e>>>0,e>>>=0;for(var i=Array(o);++r<o;)i[r]=t[r+e];return i},tn=function(t,e){return e.length<2?t:function(t,e){for(var n=0,r=(e=Je(e,t)).length;null!=t&&n<r;)t=t[Ke(e[n++])];return n&&n==r?t:void 0}(t,Qe(e,0,-1))},en=function(t,e){return e=Je(e,t),null==(t=tn(t,e))||delete t[Ke((n=e,r=null==n?0:n.length,r?n[r-1]:void 0))];var n,r};var nn=Function.prototype,rn=Object.prototype,on=nn.toString,an=rn.hasOwnProperty,cn=on.call(Object);const sn=function(t){return function(t){if(!lt(t)||"[object Object]"!=N(t))return!1;var e=Qt(t);if(null===e)return!0;var n=an.call(e,"constructor")&&e.constructor;return"function"==typeof n&&n instanceof n&&on.call(n)==cn}(t)?void 0:t};var un=E?E.isConcatSpreadable:void 0;const ln=function(t){return gt(t)||vt(t)||!!(un&&t&&t[un])},fn=function t(e,n,r,o,i){var a=-1,c=e.length;for(r||(r=ln),i||(i=[]);++a<c;){var s=e[a];n>0&&r(s)?n>1?t(s,n-1,r,o,i):Kt(i,s):o||(i[i.length]=s)}return i},hn=function(t){return null!=t&&t.length?fn(t,1):[]};var pn=Math.max;const dn=it?function(t,e){return it(t,"toString",{configurable:!0,enumerable:!1,value:(n=e,function(){return n}),writable:!0});var n}:function(t){return t};var vn=Date.now;const gn=(mn=dn,yn=0,bn=0,function(){var t=vn(),e=16-(t-bn);if(bn=t,e>0){if(++yn>=800)return arguments[0]}else yn=0;return mn.apply(void 0,arguments)});var mn,yn,bn;const _n=function(t){return gn(function(t,e,n){return e=pn(void 0===e?t.length-1:e,0),function(){for(var r=arguments,o=-1,i=pn(r.length-e,0),a=Array(i);++o<i;)a[o]=r[e+o];o=-1;for(var c=Array(e+1);++o<e;)c[o]=r[o];return c[e]=n(a),function(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}(t,this,c)}}(t,void 0,hn),t+"")}((function(t,e){var n={};if(null==t)return n;var r=!1;e=v(e,(function(e){return e=Je(e,t),r||(r=e.length>1),e})),ut(t,re(t),n),r&&(n=ze(n,7,sn));for(var o=e.length;o--;)en(n,e[o]);return n}));var jn=["product","id","key"],xn=[].concat(jn,["productService"],Object.values(d)),wn=function(){function t(){}return t.getAssetsPath=function(){return p().forum.data.attributes.assetsBaseUrl+"/extensions/"+this.PREFIX},t.getLocale=function(){return p().data.locale},t.getPath=function(t){return t?this.PREFIX+"."+t:this.PREFIX},t.get=function(t){return p().forum.attribute(this.getPath(t))},t.isEnabled=function(t){return this.get(t)},t.isStandalone=function(t){return this.get(t+".standalone")},t.isConfigured=function(t){return this.get((t?t+".":"")+"configured")},t.getDefaultConfig=function(){var t=this;return _n(xn.reduce((function(e,n){return e[n]=t.get(n),e}),{}),["key"])},t.getContextEventConfig=function(t){var e=this;return r({productService:this.getDefaultConfig().productService},_n(jn.reduce((function(n,r){return n[r]=e.get(t+"."+r),n}),{}),["key"]))},t.getConfig=function(t){return!!this.isEnabled(t)&&(this.isStandalone(t)&&this.isConfigured(t)?this.getContextEventConfig(t):!!this.isConfigured()&&this.getDefaultConfig())},t}();wn.PREFIX="ffans-geetest";const On={get:function(t,e){return p().translator.trans(t,e)},admin:function(t,e){return this.get(wn.PREFIX+".admin."+t,e)},forum:function(t,e){return this.get(wn.PREFIX+".forum."+t,e)},lib:function(t,e){return this.get(wn.PREFIX+".lib."+t,e)}};var En,An=function(t){return t.V4="v4",t.V3="v3",t}({}),Pn=((En={})[An.V4]="gt4",En[An.V3]="gt.0.4.9",En),Sn=function(t){return t.V4="initGeetest4",t.V3="initGeetest",t}({});const kn=flarum.core.compat["common/components/Select"];var Cn=n.n(kn);const Ln=flarum.core.compat["common/components/Switch"];var Nn=n.n(Ln);const Fn=flarum.core.compat["common/Component"];var In=n.n(Fn),Tn=function(t){return t.FLOAT="float",t.POPUP="popup",t.BIND="bind",t}({});var Bn=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]");const zn=function(t){return Bn.test(t)};var Mn="\\ud800-\\udfff",Rn="["+Mn+"]",Un="[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]",Dn="\\ud83c[\\udffb-\\udfff]",Vn="[^"+Mn+"]",Gn="(?:\\ud83c[\\udde6-\\uddff]){2}",$n="[\\ud800-\\udbff][\\udc00-\\udfff]",Zn="(?:"+Un+"|"+Dn+")?",Xn="[\\ufe0e\\ufe0f]?",Hn=Xn+Zn+"(?:\\u200d(?:"+[Vn,Gn,$n].join("|")+")"+Xn+Zn+")*",qn="(?:"+[Vn+Un+"?",Un,Gn,$n,Rn].join("|")+")",Wn=RegExp(Dn+"(?="+Dn+")|"+qn+Hn,"g");const Yn=function(t){return zn(t)?function(t){return t.match(Wn)||[]}(t):function(t){return t.split("")}(t)},Jn=function(t){t=Ye(t);var e,n,r,o,i=zn(t)?Yn(t):void 0,a=i?i[0]:t.charAt(0),c=i?(e=i,n=1,o=e.length,r=void 0===r?o:r,!n&&r>=o?e:Qe(e,n,r)).join(""):t.slice(1);return a.toUpperCase()+c},Kn=(Qn={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},function(t){return null==Qn?void 0:Qn[t]});var Qn,tr=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,er=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g");var nr=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g;var rr=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;var or="\\ud800-\\udfff",ir="\\u2700-\\u27bf",ar="a-z\\xdf-\\xf6\\xf8-\\xff",cr="A-Z\\xc0-\\xd6\\xd8-\\xde",sr="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",ur="["+sr+"]",lr="\\d+",fr="["+ir+"]",hr="["+ar+"]",pr="[^"+or+sr+lr+ir+ar+cr+"]",dr="(?:\\ud83c[\\udde6-\\uddff]){2}",vr="[\\ud800-\\udbff][\\udc00-\\udfff]",gr="["+cr+"]",mr="(?:"+hr+"|"+pr+")",yr="(?:"+gr+"|"+pr+")",br="(?:['’](?:d|ll|m|re|s|t|ve))?",_r="(?:['’](?:D|LL|M|RE|S|T|VE))?",jr="(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?",xr="[\\ufe0e\\ufe0f]?",wr=xr+jr+"(?:\\u200d(?:"+["[^"+or+"]",dr,vr].join("|")+")"+xr+jr+")*",Or="(?:"+[fr,dr,vr].join("|")+")"+wr,Er=RegExp([gr+"?"+hr+"+"+br+"(?="+[ur,gr,"$"].join("|")+")",yr+"+"+_r+"(?="+[ur,gr+mr,"$"].join("|")+")",gr+"?"+mr+"+"+br,gr+"+"+_r,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",lr,Or].join("|"),"g");const Ar=function(t,e,n){return t=Ye(t),void 0===(e=n?void 0:e)?function(t){return rr.test(t)}(t)?function(t){return t.match(Er)||[]}(t):function(t){return t.match(nr)||[]}(t):t.match(e)||[]};var Pr=RegExp("['’]","g");const Sr=function(t){return function(e){return function(t,e,n,r){var o=-1,i=null==t?0:t.length;for(r&&i&&(n=t[++o]);++o<i;)n=e(n,t[o],o,t);return n}(Ar(function(t){return(t=Ye(t))&&t.replace(tr,Kn).replace(er,"")}(e).replace(Pr,"")),t,"")}},kr=Sr((function(t,e,n){return e=e.toLowerCase(),t+(n?Jn(Ye(e).toLowerCase()):e)}));var Cr=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))||this).isMouseOver=!1,e.productMouseTimer=void 0,e}i(e,t);var n=e.prototype;return n.view=function(){return m("i",{"aria-hidden":"true",className:"icon fas fa-question-circle Button-icon ffans-geetest--product-help".concat(this.isMouseOver?" is-hover":""),onmouseenter:this.handleProductMouseEnter.bind(this),onmouseleave:this.handleProductMouseLeave.bind(this)},this.getProductTooltip())},n.getProductTooltip=function(){return m("div",{className:"dl-tooltip"},Object.keys(Tn).map((function(t){var e=kr(Tn[t]);return m("dl",null,m("dt",null,On.admin("settings.config.product_"+e+"_label")),m("dd",null,On.admin("settings.config.product_"+e+"_help_text")),m("dd",null,m("img",{alt:e,src:wn.getAssetsPath()+"/images/"+e+".gif"})))})),m("a",{target:"_blank",href:"https://console.geetest.com/sensbot/set/interface/baseinterface/"},m("i",{"aria-hidden":"true",class:"icon fas fa-question-circle Button-icon"}),m("span",null,On.admin("settings.config.product_learn_more_link"))))},n.handleProductMouseEnter=function(){clearTimeout(this.productMouseTimer),this.isMouseOver=!0,m.redraw()},n.handleProductMouseLeave=function(){var t=this;clearTimeout(this.productMouseTimer),this.productMouseTimer=setTimeout((function(){t.isMouseOver=!1,m.redraw()}),100)},e}(In()),Lr=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))||this).product=void 0,e.id=void 0,e.key=void 0,e}i(e,t);var n=e.prototype;return n.oninit=function(e){t.prototype.oninit.call(this,e),this.product=this.attrs.stream.product,this.id=this.attrs.stream.id,this.key=this.attrs.stream.key},n.view=function(){var t;return m("div",{className:"Form-group"},m("div",{className:"Form-group"},m("label",null,On.admin("settings.config.product_label")),m("div",{className:"helpText"},On.admin("settings.config.product_help_text")," ",this.attrs.showHelp&&m(Cr,null)),m(Cn(),{options:Object.values(Tn).reduce((function(t,e){return t[e]=On.admin("settings.config.product_"+e+"_label"),t}),{}),value:null==(t=this.product)?void 0:t.call(this),onchange:this.product})),m("div",{className:"Form-group"},m("label",null,On.admin("settings.config.id_label")),m("div",{className:"helpText"},On.admin("settings.config.id_help_text",{a:m("a",{href:"https://auth.geetest.com/product",tabindex:"-1",target:"_blank"})})),m("input",{type:"text",className:"FormControl",bidi:this.id})),m("div",{className:"Form-group"},m("label",null,On.admin("settings.config.key_label")),m("div",{className:"helpText"},On.admin("settings.config.key_help_text",{a:m("a",{href:"https://auth.geetest.com/product",tabindex:"-1",target:"_blank"})})),m("input",{type:"password",autocomplete:"off",className:"FormControl",bidi:this.key})))},n.handleTrimInput=function(t,e){var n,r=null==(n=e.target)?void 0:n.value;t(r?r.trim():"")},e}(In());const Nr=flarum.core.compat["admin/components/SettingsModal"];var Fr=n.n(Nr);function Ir(t,n){return n?"1"===e().data.settings[wn.getPath(t)]:e().data.settings[wn.getPath(t)]}var Tr=function(t){function n(){return t.apply(this,arguments)||this}return i(n,t),n.get=function(t,n){var r=e().data.settings[this.getPath(t)];return n?"1"===r:r},n.getDefaultConfig=function(){var t=this;return xn.reduce((function(e,n){return e[n]=t.get(n),e}),{})},n.getContextEventConfig=function(t){var e=this;return r({productService:this.getDefaultConfig().productService},jn.reduce((function(n,r){return n[r]=e.get(t+"."+r),n}),{}))},n}(wn);const Br=flarum.core.compat["admin/utils/saveSettings"];var zr=n.n(Br);const Mr=flarum.core.compat["common/components/Alert"];var Rr=n.n(Mr),Ur=null;var Dr=function(t){function e(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))||this).settings={},e}i(e,t);var n=e.prototype;return n.className=function(){return"context-event-config-modal"},n.title=function(){return m("p",null,On.admin("settings.config.title",{context:On.admin("settings.context_event_"+this.attrs.contextEvent+"_label")}))},n.oninit=function(e){var n=this;t.prototype.oninit.call(this,e);var r,o,i={standalone:null!=(o=Ir((r=this.attrs.contextEvent)+".standalone"))?o:"",product:Ir(r+".product")||"",id:Ir(r+".id")||"",key:Ir(r+".key")||""};Object.keys(i).forEach((function(t){if("standalone"!==t){var e=n.getSettingPath(t);n.settings[e]=f()(i[t])}})),this.settings[this.getSettingPath("standalone")]=f()("1"===i.standalone)},n.getSettingPath=function(t){return Tr.getPath(this.attrs.contextEvent)+(t?"."+t:"")},n.form=function(){var t,e,n,r;return m("div",{className:"Form-group"},m("div",{className:"Form-group"},m("label",null,On.admin("settings.config.standalone_label")),m("div",{className:"helpText"},On.admin("settings.config.standalone_help_text")),m("div",{class:"flex ai-c"},m(Nn(),{state:null==(t=(e=this.settings)[this.getSettingPath("standalone")])?void 0:t.call(e),onchange:this.settings[this.getSettingPath("standalone")]},On.get("core.admin.extension.enabled")))),(null==(n=(r=this.settings)[this.getSettingPath("standalone")])?void 0:n.call(r))&&m(Lr,{stream:{id:this.settings[this.getSettingPath("id")],key:this.settings[this.getSettingPath("key")],product:this.settings[this.getSettingPath("product")]}}))},n.onsubmit=function(t){var e=this;t.preventDefault(),p().alerts.dismiss(Ur),this.loading=!0,zr()(this.dirty()).then((function(){Ur=p().alerts.show(Rr(),{type:"success"},On.get("core.admin.settings.saved_message")),e.onsaved(),window.location.reload()})).finally((function(){e.loaded()}))},e}(Fr());function Vr(t,e,n,r,o,i,a){try{var c=t[i](a),s=c.value}catch(t){return void n(t)}c.done?e(s):Promise.resolve(s).then(r,o)}function Gr(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function a(t){Vr(i,r,o,a,c,"next",t)}function c(t){Vr(i,r,o,a,c,"throw",t)}a(void 0)}))}}var $r=n(183),Zr=n.n($r),Xr=function(t){function e(){return t.apply(this,arguments)||this}return i(e,t),e}(wn),Hr=function(){function t(t,e,n,r){this.isNotBind=!1,this.isBind=!1,this.config=void 0,this.readyCallback=void 0,this.successCallback=void 0,this.errorCallback=function(t){p().alerts.show(t)},this.captchaInstance=void 0,this.config=t,this.readyCallback=e,this.successCallback=n,this.errorCallback=r||this.errorCallback,this.isNotBind=this.config.product!==Tn.BIND,this.isBind=!this.isNotBind}var e=t.prototype;return e.render=function(t){switch(this.config.productService){case An.V4:this.renderV4(t);break;case An.V3:this.renderV3(t)}},e.renderV4=function(t){var e=this;null==window.initGeetest4||window.initGeetest4(r({captchaId:this.config.id,nativeButton:{width:"100%"},product:this.config.product},this.isBind?{hideSuccess:!0}:{},{language:Xr.getLocale(),onError:this.handleInitError.bind(this)}),(function(n){e.captchaInstance=n,n.appendTo(t),n.onReady((function(){null==e.readyCallback||e.readyCallback()})).onSuccess((function(){null==e.successCallback||e.successCallback()})).onError(e.handleError.bind(e))}))},e.renderV3=function(t){var e=new XMLHttpRequest;e.addEventListener("load",this.v3Loaded.bind(this)),e.open("GET",p().forum.data.attributes.apiUrl),e.responseType="json",e.send()},e.v3Loaded=function(){console.log("v3 loaded")},e.handleInitError=function(t){this.handleError(t,On.lib("verify.init_error_message"))},e.handleError=function(t,e){void 0===e&&(e=On.lib("verify.error_message"));var n={type:"error",content:e+"："+t.code+" "+t.msg+" "+(t.desc.detail?"（"+t.desc.detail+"）":"")};this.errorCallback(n)},e.show=function(){return this.captchaInstance.showCaptcha()},e.reset=function(){return this.captchaInstance.reset()},e.getValidate=function(){return this.captchaInstance.getValidate()},t}();const qr=flarum.core.compat["common/utils/classList"];var Wr=n.n(qr);const Yr=function(){function t(t){return function(e){return new Promise((function(n,r){var o=document.createElement(t),i="body",a="src";switch(o.onload=function(){n(e)},o.onerror=function(){r(e)},t){case"script":o.async=!0;break;case"link":o.type="text/css",o.rel="stylesheet",a="href",i="head"}o[a]=e,document[i].appendChild(o)}))}}return{css:t("link"),js:t("script"),img:t("img")}}();function Jr(){return(Jr=Gr(Zr().mark((function t(e){return Zr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!p().geetestLoaded){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,Yr.js(wn.getAssetsPath()+"/"+Pn[e]+".js");case 4:p().geetestLoaded=!0;case 5:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var Kr=function(t){function e(){return t.apply(this,arguments)||this}i(e,t);var n=e.prototype;return n.oninit=function(e){t.prototype.oninit.call(this,e)},n.view=function(){return m("div",Object.assign({className:"Form-group geetest-captcha"},_n(this.attrs,["state"])))},n.oncreate=function(e){var n=this;t.prototype.oncreate.call(this,e),function(t){return Jr.apply(this,arguments)}(this.attrs.state.config.productService).then((function(){var t=setInterval((function(){(window[Sn.V4]||window[Sn.V3])&&(clearInterval(t),n.attrs.state.render(e.dom))}),250)}))},e}(In()),Qr=function(t){function n(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))||this).loading=!1,e.alertAttrs=void 0,e}i(n,t);var r=n.prototype;return r.view=function(t){var e;return m("div",{className:"RecaptchaPage-geetest"},m("div",{class:"ExtensionPage-permissions-header"},m("div",{class:"container"},m("h2",{className:"ExtensionTitle"},On.admin("test.title")))),m("div",{class:"container"},m("form",{onsubmit:this.onsubmit.bind(this),className:Wr()("FoFReCaptchaTestForm",(null==(e=this.state)?void 0:e.isBind)&&"isInvisible")},m("div",{class:"Form-group Form-group--geetest"},m("p",{class:"helpText"},On.admin("test.help_text")),this.alertAttrs&&m(Rr(),Object.assign({},this.alertAttrs,{dismissible:!1})),this.state&&m(Kr,{state:this.state,style:"width: 260px;"})),m("div",{class:"Form-group"},m("div",{class:"ButtonGroup"},m(u(),{className:"Button Button--primary",type:"submit",loading:this.loading},this.state?On.admin("test.submit_button"):On.admin("test.load_button")),this.state&&m(u(),{className:"Button",onclick:this.initialize.bind(this)},On.admin("test.reload_button")))),m("div",{class:"Form-group"}))))},r.destroy=function(){this.state=null,this.alertAttrs=null,this.loading=!1,m.redraw.sync()},r.initialize=function(){var t=this;this.destroy();var e=this.attrs.settings||Tr.getDefaultConfig();this.loading=!0,this.state=new Hr(e,(function(){t.loading=!1,m.redraw()}),(function(){var e;if(null!=(e=t.state)&&e.isBind){var n=new Event("submit");n.__isBindSuccess=!0,t.onsubmit(n)}t.loading=!1,m.redraw()}),(function(e){t.alertAttrs=e,t.loading=!1,m.redraw()}))},r.onsubmit=function(){var t=Gr(Zr().mark((function t(n){var r;return Zr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n.preventDefault(),this.state){t.next=3;break}return t.abrupt("return",this.initialize());case 3:if(!this.state.isBind||n.__isBindSuccess){t.next=7;break}return n.preventDefault(),this.state.show(),t.abrupt("return");case 7:return this.alertAttrs=null,this.loading=!0,m.redraw(),r={"ffans-geetest-result":this.state.getValidate()},t.prev=11,t.next=14,e().request({method:"POST",url:e().forum.attribute("apiUrl")+"/ffans/geetest/test",body:r,errorHandler:function(){}});case 14:t.next=19;break;case 16:return t.prev=16,t.t0=t.catch(11),t.abrupt("return",this.onerror(t.t0));case 19:this.loading=!1,this.alertAttrs={type:"success",content:On.lib("verify.success_message")},this.state.reset(),m.redraw();case 23:case"end":return t.stop()}}),t,this,[[11,16]])})));return function(e){return t.apply(this,arguments)}}(),r.onerror=function(t){var e,n=t.alert||t;this.loading=!1,this.alertAttrs=n,null==(e=this.state)||e.reset(),m.redraw()},n}(In());const to=Sr((function(t,e,n){return t+(n?"_":"")+e.toLowerCase()}));var eo=function(t){function n(){return t.apply(this,arguments)||this}i(n,t);var o=n.prototype;return o.oninit=function(e){var n=this;t.prototype.oninit.call(this,e),xn.forEach((function(t){var e=to(t);n.settings[Tr.getPath(e)]=f()(Tr.get(e))})),Object.values(d).forEach((function(t){var e=Tr.getPath(t),r=n.settings[e]();n.settings[e]("1"===r)}))},o.content=function(){var t=this;return m("div",{className:"geetest-page ExtensionPage-settings"},m("div",{className:"container"},m("div",{className:"Form"},m("div",{className:"Form-group"},m("label",null,On.admin("settings.product_service_label")),m("div",{className:"helpText"},On.admin("settings.product_service_help_text")),m(Cn(),{options:Object.values(An).filter((function(t){return t!==An.V3})).reduce((function(t,e){return t[e]=On.admin("settings.product_service_"+e+"_label"),t}),{}),value:this.settings[Tr.getPath(to("productService"))](),onchange:this.settings[Tr.getPath(to("productService"))]})),m(Lr,{stream:{product:this.settings[Tr.getPath("product")],id:this.settings[Tr.getPath("id")],key:this.settings[Tr.getPath("key")]},showHelp:!0}),m("div",{className:"Form-group"},m("label",null,On.admin("settings.context_event_label")),m("div",{className:"helpText"},On.admin("settings.context_event_help_text")),Object.values(d).map((function(e){var n=Tr.getPath(e);return m("div",{class:"flex ai-c gap-4"},m(Nn(),{state:t.settings[n](),onchange:t.settings[n]},On.admin("settings.context_event_"+e+"_label")),t.settings[n]()&&m(u(),{type:"button","aria-label":"Config "+e,class:"Button Button--rounded Button--flat w-36 py-8 px-0",onclick:t.handleOpenContextEventConfig.bind(t,e)},m("i",{class:"icon fas fa-cog"})))}))),m("div",{className:"Form-group"},this.submitButton()))))},o.sections=function(e){var n=t.prototype.sections.call(this,e),o=r({},this.settings);for(var i in o)o[i]instanceof Function&&(o[kr(i.replace(Tr.PREFIX+".",""))]=o[i].call(this),delete o[i]);return n.add("geetest",m(Qr,{settings:o})),n.setPriority("permissions",-1),n},o.handleOpenContextEventConfig=function(t){e().modal.show(Dr,{contextEvent:t},!0)},n}(c());e().initializers.add("ffans/geetest",(function(){e().extensionData.for("ffans-geetest").registerPage(eo)}))})(),module.exports={}})();
//# sourceMappingURL=admin.js.map
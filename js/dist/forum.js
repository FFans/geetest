/*! For license information please see forum.js.LICENSE.txt */
(()=>{var t={24:(t,e,r)=>{var n=r(735).default;function o(){"use strict";t.exports=o=function(){return r},t.exports.__esModule=!0,t.exports.default=t.exports;var e,r={},i=Object.prototype,a=i.hasOwnProperty,c=Object.defineProperty||function(t,e,r){t[e]=r.value},u="function"==typeof Symbol?Symbol:{},s=u.iterator||"@@iterator",f=u.asyncIterator||"@@asyncIterator",l=u.toStringTag||"@@toStringTag";function p(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{p({},"")}catch(e){p=function(t,e,r){return t[e]=r}}function h(t,e,r,n){var o=e&&e.prototype instanceof j?e:j,i=Object.create(o.prototype),a=new F(n||[]);return c(i,"_invoke",{value:C(t,r,a)}),i}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}r.wrap=h;var v="suspendedStart",y="suspendedYield",b="executing",g="completed",m={};function j(){}function _(){}function w(){}var O={};p(O,s,(function(){return this}));var x=Object.getPrototypeOf,E=x&&x(x(M([])));E&&E!==i&&a.call(E,s)&&(O=E);var P=w.prototype=j.prototype=Object.create(O);function A(t){["next","throw","return"].forEach((function(e){p(t,e,(function(t){return this._invoke(e,t)}))}))}function S(t,e){function r(o,i,c,u){var s=d(t[o],t,i);if("throw"!==s.type){var f=s.arg,l=f.value;return l&&"object"==n(l)&&a.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,c,u)}),(function(t){r("throw",t,c,u)})):e.resolve(l).then((function(t){f.value=t,c(f)}),(function(t){return r("throw",t,c,u)}))}u(s.arg)}var o;c(this,"_invoke",{value:function(t,n){function i(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(i,i):i()}})}function C(t,r,n){var o=v;return function(i,a){if(o===b)throw Error("Generator is already running");if(o===g){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===v)throw o=g,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=b;var s=d(t,r,n);if("normal"===s.type){if(o=n.done?g:y,s.arg===m)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=g,n.method="throw",n.arg=s.arg)}}}function L(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,L(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=d(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function F(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function M(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return _.prototype=w,c(P,"constructor",{value:w,configurable:!0}),c(w,"constructor",{value:_,configurable:!0}),_.displayName=p(w,l,"GeneratorFunction"),r.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===_||"GeneratorFunction"===(e.displayName||e.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,p(t,l,"GeneratorFunction")),t.prototype=Object.create(P),t},r.awrap=function(t){return{__await:t}},A(S.prototype),p(S.prototype,f,(function(){return this})),r.AsyncIterator=S,r.async=function(t,e,n,o,i){void 0===i&&(i=Promise);var a=new S(h(t,e,n,o),i);return r.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},A(P),p(P,l,"Generator"),p(P,s,(function(){return this})),p(P,"toString",(function(){return"[object Generator]"})),r.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},r.values=M,F.prototype={constructor:F,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=a.call(i,"catchLoc"),s=a.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:M(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},r}t.exports=o,t.exports.__esModule=!0,t.exports.default=t.exports},735:t=>{function e(r){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(r)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},183:(t,e,r)=>{var n=r(24)();t.exports=n;try{regeneratorRuntime=n}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={exports:{}};return t[n](i,i.exports,r),i.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";const t=flarum.core.compat["forum/app"];var e=r.n(t);const n=flarum.core.compat["common/extend"],o=flarum.core.compat["forum/components/LogInModal"];var i=r.n(o);function a(t,e){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},a(t,e)}function c(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,a(t,e)}function u(){return u=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},u.apply(null,arguments)}const s=flarum.core.compat["common/app"];var f=r.n(s),l=function(t){return t.SIGNUP="signup",t.LOGIN="login",t.FORGOT="forgot",t}({});const p=function(t,e){for(var r=-1,n=null==t?0:t.length,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o},h=function(t,e){return t===e||t!=t&&e!=e},d=function(t,e){for(var r=t.length;r--;)if(h(t[r][0],e))return r;return-1};var v=Array.prototype.splice;function y(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}y.prototype.clear=function(){this.__data__=[],this.size=0},y.prototype.delete=function(t){var e=this.__data__,r=d(e,t);return!(r<0||(r==e.length-1?e.pop():v.call(e,r,1),--this.size,0))},y.prototype.get=function(t){var e=this.__data__,r=d(e,t);return r<0?void 0:e[r][1]},y.prototype.has=function(t){return d(this.__data__,t)>-1},y.prototype.set=function(t,e){var r=this.__data__,n=d(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this};const b=y,g="object"==typeof global&&global&&global.Object===Object&&global;var j="object"==typeof self&&self&&self.Object===Object&&self;const _=g||j||Function("return this")(),w=_.Symbol;var O=Object.prototype,x=O.hasOwnProperty,E=O.toString,P=w?w.toStringTag:void 0;var A=Object.prototype.toString;var S=w?w.toStringTag:void 0;const C=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":S&&S in Object(t)?function(t){var e=x.call(t,P),r=t[P];try{t[P]=void 0;var n=!0}catch(t){}var o=E.call(t);return n&&(e?t[P]=r:delete t[P]),o}(t):function(t){return A.call(t)}(t)},L=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},I=function(t){if(!L(t))return!1;var e=C(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},k=_["__core-js_shared__"];var F,M=(F=/[^.]+$/.exec(k&&k.keys&&k.keys.IE_PROTO||""))?"Symbol(src)_1."+F:"";var B=Function.prototype.toString;const T=function(t){if(null!=t){try{return B.call(t)}catch(t){}try{return t+""}catch(t){}}return""};var G=/^\[object .+?Constructor\]$/,N=Function.prototype,z=Object.prototype,V=N.toString,U=z.hasOwnProperty,R=RegExp("^"+V.call(U).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const D=function(t){return!(!L(t)||(e=t,M&&M in e))&&(I(t)?R:G).test(T(t));var e},$=function(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return D(r)?r:void 0},X=$(_,"Map"),q=$(Object,"create");var W=Object.prototype.hasOwnProperty;var Y=Object.prototype.hasOwnProperty;function H(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}H.prototype.clear=function(){this.__data__=q?q(null):{},this.size=0},H.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},H.prototype.get=function(t){var e=this.__data__;if(q){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return W.call(e,t)?e[t]:void 0},H.prototype.has=function(t){var e=this.__data__;return q?void 0!==e[t]:Y.call(e,t)},H.prototype.set=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=q&&void 0===e?"__lodash_hash_undefined__":e,this};const J=H,K=function(t,e){var r,n,o=t.__data__;return("string"==(n=typeof(r=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof e?"string":"hash"]:o.map};function Q(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}Q.prototype.clear=function(){this.size=0,this.__data__={hash:new J,map:new(X||b),string:new J}},Q.prototype.delete=function(t){var e=K(this,t).delete(t);return this.size-=e?1:0,e},Q.prototype.get=function(t){return K(this,t).get(t)},Q.prototype.has=function(t){return K(this,t).has(t)},Q.prototype.set=function(t,e){var r=K(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this};const Z=Q;function tt(t){var e=this.__data__=new b(t);this.size=e.size}tt.prototype.clear=function(){this.__data__=new b,this.size=0},tt.prototype.delete=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},tt.prototype.get=function(t){return this.__data__.get(t)},tt.prototype.has=function(t){return this.__data__.has(t)},tt.prototype.set=function(t,e){var r=this.__data__;if(r instanceof b){var n=r.__data__;if(!X||n.length<199)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new Z(n)}return r.set(t,e),this.size=r.size,this};const et=tt,rt=function(){try{var t=$(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),nt=function(t,e,r){"__proto__"==e&&rt?rt(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r};var ot=Object.prototype.hasOwnProperty;const it=function(t,e,r){var n=t[e];ot.call(t,e)&&h(n,r)&&(void 0!==r||e in t)||nt(t,e,r)},at=function(t,e,r,n){var o=!r;r||(r={});for(var i=-1,a=e.length;++i<a;){var c=e[i],u=n?n(r[c],t[c],c,r,t):void 0;void 0===u&&(u=t[c]),o?nt(r,c,u):it(r,c,u)}return r},ct=function(t){return null!=t&&"object"==typeof t},ut=function(t){return ct(t)&&"[object Arguments]"==C(t)};var st=Object.prototype,ft=st.hasOwnProperty,lt=st.propertyIsEnumerable;const pt=ut(function(){return arguments}())?ut:function(t){return ct(t)&&ft.call(t,"callee")&&!lt.call(t,"callee")},ht=Array.isArray;var dt="object"==typeof exports&&exports&&!exports.nodeType&&exports,vt=dt&&"object"==typeof module&&module&&!module.nodeType&&module,yt=vt&&vt.exports===dt?_.Buffer:void 0;const bt=(yt?yt.isBuffer:void 0)||function(){return!1};var gt=/^(?:0|[1-9]\d*)$/;const mt=function(t,e){var r=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&gt.test(t))&&t>-1&&t%1==0&&t<e},jt=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991};var _t={};_t["[object Float32Array]"]=_t["[object Float64Array]"]=_t["[object Int8Array]"]=_t["[object Int16Array]"]=_t["[object Int32Array]"]=_t["[object Uint8Array]"]=_t["[object Uint8ClampedArray]"]=_t["[object Uint16Array]"]=_t["[object Uint32Array]"]=!0,_t["[object Arguments]"]=_t["[object Array]"]=_t["[object ArrayBuffer]"]=_t["[object Boolean]"]=_t["[object DataView]"]=_t["[object Date]"]=_t["[object Error]"]=_t["[object Function]"]=_t["[object Map]"]=_t["[object Number]"]=_t["[object Object]"]=_t["[object RegExp]"]=_t["[object Set]"]=_t["[object String]"]=_t["[object WeakMap]"]=!1;const wt=function(t){return function(e){return t(e)}};var Ot="object"==typeof exports&&exports&&!exports.nodeType&&exports,xt=Ot&&"object"==typeof module&&module&&!module.nodeType&&module,Et=xt&&xt.exports===Ot&&g.process;const Pt=function(){try{return xt&&xt.require&&xt.require("util").types||Et&&Et.binding&&Et.binding("util")}catch(t){}}();var At=Pt&&Pt.isTypedArray;const St=At?wt(At):function(t){return ct(t)&&jt(t.length)&&!!_t[C(t)]};var Ct=Object.prototype.hasOwnProperty;const Lt=function(t,e){var r=ht(t),n=!r&&pt(t),o=!r&&!n&&bt(t),i=!r&&!n&&!o&&St(t),a=r||n||o||i,c=a?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],u=c.length;for(var s in t)!e&&!Ct.call(t,s)||a&&("length"==s||o&&("offset"==s||"parent"==s)||i&&("buffer"==s||"byteLength"==s||"byteOffset"==s)||mt(s,u))||c.push(s);return c};var It=Object.prototype;const kt=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||It)},Ft=function(t,e){return function(r){return t(e(r))}},Mt=Ft(Object.keys,Object);var Bt=Object.prototype.hasOwnProperty;const Tt=function(t){return null!=t&&jt(t.length)&&!I(t)},Gt=function(t){return Tt(t)?Lt(t):function(t){if(!kt(t))return Mt(t);var e=[];for(var r in Object(t))Bt.call(t,r)&&"constructor"!=r&&e.push(r);return e}(t)};var Nt=Object.prototype.hasOwnProperty;const zt=function(t){if(!L(t))return function(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e}(t);var e=kt(t),r=[];for(var n in t)("constructor"!=n||!e&&Nt.call(t,n))&&r.push(n);return r},Vt=function(t){return Tt(t)?Lt(t,!0):zt(t)};var Ut="object"==typeof exports&&exports&&!exports.nodeType&&exports,Rt=Ut&&"object"==typeof module&&module&&!module.nodeType&&module,Dt=Rt&&Rt.exports===Ut?_.Buffer:void 0,$t=Dt?Dt.allocUnsafe:void 0;const Xt=function(){return[]};var qt=Object.prototype.propertyIsEnumerable,Wt=Object.getOwnPropertySymbols;const Yt=Wt?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var r=-1,n=null==t?0:t.length,o=0,i=[];++r<n;){var a=t[r];e(a,r,t)&&(i[o++]=a)}return i}(Wt(t),(function(e){return qt.call(t,e)})))}:Xt,Ht=function(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t},Jt=Ft(Object.getPrototypeOf,Object),Kt=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)Ht(e,Yt(t)),t=Jt(t);return e}:Xt,Qt=function(t,e,r){var n=e(t);return ht(t)?n:Ht(n,r(t))},Zt=function(t){return Qt(t,Gt,Yt)},te=function(t){return Qt(t,Vt,Kt)},ee=$(_,"DataView"),re=$(_,"Promise"),ne=$(_,"Set"),oe=$(_,"WeakMap");var ie="[object Map]",ae="[object Promise]",ce="[object Set]",ue="[object WeakMap]",se="[object DataView]",fe=T(ee),le=T(X),pe=T(re),he=T(ne),de=T(oe),ve=C;(ee&&ve(new ee(new ArrayBuffer(1)))!=se||X&&ve(new X)!=ie||re&&ve(re.resolve())!=ae||ne&&ve(new ne)!=ce||oe&&ve(new oe)!=ue)&&(ve=function(t){var e=C(t),r="[object Object]"==e?t.constructor:void 0,n=r?T(r):"";if(n)switch(n){case fe:return se;case le:return ie;case pe:return ae;case he:return ce;case de:return ue}return e});const ye=ve;var be=Object.prototype.hasOwnProperty;const ge=_.Uint8Array,me=function(t){var e=new t.constructor(t.byteLength);return new ge(e).set(new ge(t)),e};var je=/\w*$/;var _e=w?w.prototype:void 0,we=_e?_e.valueOf:void 0;const Oe=function(t,e,r){var n,o,i,a=t.constructor;switch(e){case"[object ArrayBuffer]":return me(t);case"[object Boolean]":case"[object Date]":return new a(+t);case"[object DataView]":return function(t,e){var r=e?me(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}(t,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(t,e){var r=e?me(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}(t,r);case"[object Map]":case"[object Set]":return new a;case"[object Number]":case"[object String]":return new a(t);case"[object RegExp]":return(i=new(o=t).constructor(o.source,je.exec(o))).lastIndex=o.lastIndex,i;case"[object Symbol]":return n=t,we?Object(we.call(n)):{}}};var xe=Object.create;const Ee=function(){function t(){}return function(e){if(!L(e))return{};if(xe)return xe(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();var Pe=Pt&&Pt.isMap;const Ae=Pe?wt(Pe):function(t){return ct(t)&&"[object Map]"==ye(t)};var Se=Pt&&Pt.isSet;const Ce=Se?wt(Se):function(t){return ct(t)&&"[object Set]"==ye(t)};var Le="[object Arguments]",Ie="[object Function]",ke="[object Object]",Fe={};Fe[Le]=Fe["[object Array]"]=Fe["[object ArrayBuffer]"]=Fe["[object DataView]"]=Fe["[object Boolean]"]=Fe["[object Date]"]=Fe["[object Float32Array]"]=Fe["[object Float64Array]"]=Fe["[object Int8Array]"]=Fe["[object Int16Array]"]=Fe["[object Int32Array]"]=Fe["[object Map]"]=Fe["[object Number]"]=Fe[ke]=Fe["[object RegExp]"]=Fe["[object Set]"]=Fe["[object String]"]=Fe["[object Symbol]"]=Fe["[object Uint8Array]"]=Fe["[object Uint8ClampedArray]"]=Fe["[object Uint16Array]"]=Fe["[object Uint32Array]"]=!0,Fe["[object Error]"]=Fe[Ie]=Fe["[object WeakMap]"]=!1;const Me=function t(e,r,n,o,i,a){var c,u=1&r,s=2&r,f=4&r;if(n&&(c=i?n(e,o,i,a):n(e)),void 0!==c)return c;if(!L(e))return e;var l=ht(e);if(l){if(c=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&be.call(t,"index")&&(r.index=t.index,r.input=t.input),r}(e),!u)return function(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}(e,c)}else{var p=ye(e),h=p==Ie||"[object GeneratorFunction]"==p;if(bt(e))return function(t,e){if(e)return t.slice();var r=t.length,n=$t?$t(r):new t.constructor(r);return t.copy(n),n}(e,u);if(p==ke||p==Le||h&&!i){if(c=s||h?{}:function(t){return"function"!=typeof t.constructor||kt(t)?{}:Ee(Jt(t))}(e),!u)return s?function(t,e){return at(t,Kt(t),e)}(e,function(t,e){return t&&at(e,Vt(e),t)}(c,e)):function(t,e){return at(t,Yt(t),e)}(e,function(t,e){return t&&at(e,Gt(e),t)}(c,e))}else{if(!Fe[p])return i?e:{};c=Oe(e,p,u)}}a||(a=new et);var d=a.get(e);if(d)return d;a.set(e,c),Ce(e)?e.forEach((function(o){c.add(t(o,r,n,o,e,a))})):Ae(e)&&e.forEach((function(o,i){c.set(i,t(o,r,n,i,e,a))}));var v=l?void 0:(f?s?te:Zt:s?Vt:Gt)(e);return function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););}(v||e,(function(o,i){v&&(o=e[i=o]),it(c,i,t(o,r,n,i,e,a))})),c},Be=function(t){return"symbol"==typeof t||ct(t)&&"[object Symbol]"==C(t)};var Te=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ge=/^\w*$/;function Ne(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var r=function r(){var n=arguments,o=e?e.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=t.apply(this,n);return r.cache=i.set(o,a)||i,a};return r.cache=new(Ne.Cache||Z),r}Ne.Cache=Z;var ze=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ve=/\\(\\)?/g;const Ue=(Re=Ne((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(ze,(function(t,r,n,o){e.push(n?o.replace(Ve,"$1"):r||t)})),e}),(function(t){return 500===De.size&&De.clear(),t})),De=Re.cache,Re);var Re,De,$e=w?w.prototype:void 0,Xe=$e?$e.toString:void 0;const qe=function t(e){if("string"==typeof e)return e;if(ht(e))return p(e,t)+"";if(Be(e))return Xe?Xe.call(e):"";var r=e+"";return"0"==r&&1/e==-1/0?"-0":r},We=function(t){return null==t?"":qe(t)},Ye=function(t,e){return ht(t)?t:function(t,e){if(ht(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!Be(t))||Ge.test(t)||!Te.test(t)||null!=e&&t in Object(e)}(t,e)?[t]:Ue(We(t))},He=function(t){if("string"==typeof t||Be(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e},Je=function(t,e){return e.length<2?t:function(t,e){for(var r=0,n=(e=Ye(e,t)).length;null!=t&&r<n;)t=t[He(e[r++])];return r&&r==n?t:void 0}(t,function(t,e,r){var n=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(r=r>o?o:r)<0&&(r+=o),o=e>r?0:r-e>>>0,e>>>=0;for(var i=Array(o);++n<o;)i[n]=t[n+e];return i}(e,0,-1))},Ke=function(t,e){return e=Ye(e,t),null==(t=Je(t,e))||delete t[He((r=e,n=null==r?0:r.length,n?r[n-1]:void 0))];var r,n};var Qe=Function.prototype,Ze=Object.prototype,tr=Qe.toString,er=Ze.hasOwnProperty,rr=tr.call(Object);const nr=function(t){return function(t){if(!ct(t)||"[object Object]"!=C(t))return!1;var e=Jt(t);if(null===e)return!0;var r=er.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&tr.call(r)==rr}(t)?void 0:t};var or=w?w.isConcatSpreadable:void 0;const ir=function(t){return ht(t)||pt(t)||!!(or&&t&&t[or])},ar=function t(e,r,n,o,i){var a=-1,c=e.length;for(n||(n=ir),i||(i=[]);++a<c;){var u=e[a];r>0&&n(u)?r>1?t(u,r-1,n,o,i):Ht(i,u):o||(i[i.length]=u)}return i},cr=function(t){return null!=t&&t.length?ar(t,1):[]};var ur=Math.max;const sr=rt?function(t,e){return rt(t,"toString",{configurable:!0,enumerable:!1,value:(r=e,function(){return r}),writable:!0});var r}:function(t){return t};var fr=Date.now;const lr=(pr=sr,hr=0,dr=0,function(){var t=fr(),e=16-(t-dr);if(dr=t,e>0){if(++hr>=800)return arguments[0]}else hr=0;return pr.apply(void 0,arguments)});var pr,hr,dr;const vr=function(t){return lr(function(t,e,r){return e=ur(void 0===e?t.length-1:e,0),function(){for(var n=arguments,o=-1,i=ur(n.length-e,0),a=Array(i);++o<i;)a[o]=n[e+o];o=-1;for(var c=Array(e+1);++o<e;)c[o]=n[o];return c[e]=r(a),function(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}(t,this,c)}}(t,void 0,cr),t+"")}((function(t,e){var r={};if(null==t)return r;var n=!1;e=p(e,(function(e){return e=Ye(e,t),n||(n=e.length>1),e})),at(t,te(t),r),n&&(r=Me(r,7,nr));for(var o=e.length;o--;)Ke(r,e[o]);return r}));var yr=["product","id","key"],br=[].concat(yr,["productService"],Object.values(l)),gr=function(){function t(){}return t.getAssetsPath=function(){return f().forum.data.attributes.assetsBaseUrl+"/extensions/"+this.PREFIX},t.getLocale=function(){return f().data.locale},t.getPath=function(t){return t?this.PREFIX+"."+t:this.PREFIX},t.get=function(t){return f().forum.attribute(this.getPath(t))},t.isEnabled=function(t){return this.get(t)},t.isStandalone=function(t){return this.get(t+".standalone")},t.isConfigured=function(t){return this.get((t?t+".":"")+"configured")},t.getDefaultConfig=function(){var t=this;return vr(br.reduce((function(e,r){return e[r]=t.get(r),e}),{}),["key"])},t.getContextEventConfig=function(t){var e=this;return u({productService:this.getDefaultConfig().productService},vr(yr.reduce((function(r,n){return r[n]=e.get(t+"."+n),r}),{}),["key"]))},t.getConfig=function(t){return!!this.isEnabled(t)&&(this.isStandalone(t)&&this.isConfigured(t)?this.getContextEventConfig(t):!!this.isConfigured()&&this.getDefaultConfig())},t}();gr.PREFIX="ffans-geetest";var mr=function(t){function e(){return t.apply(this,arguments)||this}return c(e,t),e}(gr);function jr(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}var _r=r(183),wr=r.n(_r);const Or=flarum.core.compat["common/Component"];var xr=r.n(Or);const Er=function(){function t(t){return function(e){return new Promise((function(r,n){var o=document.createElement(t),i="body",a="src";switch(o.onload=function(){r(e)},o.onerror=function(){n(e)},t){case"script":o.async=!0;break;case"link":o.type="text/css",o.rel="stylesheet",a="href",i="head"}o[a]=e,document[i].appendChild(o)}))}}return{css:t("link"),js:t("script"),img:t("img")}}(),Pr={get:function(t,e){return f().translator.trans(t,e)},admin:function(t,e){return this.get(gr.PREFIX+".admin."+t,e)},forum:function(t,e){return this.get(gr.PREFIX+".forum."+t,e)},lib:function(t,e){return this.get(gr.PREFIX+".lib."+t,e)}};var Ar,Sr=function(t){return t.V4="v4",t.V3="v3",t}({}),Cr=((Ar={})[Sr.V4]="gt4",Ar[Sr.V3]="gt.0.4.9",Ar),Lr=function(t){return t.V4="initGeetest4",t.V3="initGeetest",t}({});function Ir(){var t;return t=wr().mark((function t(e){return wr().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!f().geetestLoaded){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,Er.js(gr.getAssetsPath()+"/"+Cr[e]+".js");case 4:f().geetestLoaded=!0;case 5:case"end":return t.stop()}}),t)})),Ir=function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){jr(i,n,o,a,c,"next",t)}function c(t){jr(i,n,o,a,c,"throw",t)}a(void 0)}))},Ir.apply(this,arguments)}var kr=function(t){function e(){return t.apply(this,arguments)||this}c(e,t);var r=e.prototype;return r.oninit=function(e){t.prototype.oninit.call(this,e)},r.view=function(){return m("div",Object.assign({className:"Form-group geetest-captcha"},vr(this.attrs,["state"])))},r.oncreate=function(e){var r=this;t.prototype.oncreate.call(this,e),function(t){return Ir.apply(this,arguments)}(this.attrs.state.config.productService).then((function(){var t=setInterval((function(){(window[Lr.V4]||window[Lr.V3])&&(clearInterval(t),r.attrs.state.render(e.dom))}),250)}))},e}(xr()),Fr=function(t){return t.FLOAT="float",t.POPUP="popup",t.BIND="bind",t}({}),Mr=function(){function t(t,e,r,n){this.isNotBind=!1,this.isBind=!1,this.config=void 0,this.readyCallback=void 0,this.successCallback=void 0,this.errorCallback=function(t){f().alerts.show(t)},this.captchaInstance=void 0,this.config=t,this.readyCallback=e,this.successCallback=r,this.errorCallback=n||this.errorCallback,this.isNotBind=this.config.product!==Fr.BIND,this.isBind=!this.isNotBind}var e=t.prototype;return e.render=function(t){switch(this.config.productService){case Sr.V4:this.renderV4(t);break;case Sr.V3:this.renderV3(t)}},e.renderV4=function(t){var e=this;null==window.initGeetest4||window.initGeetest4(u({captchaId:this.config.id,nativeButton:{width:"100%"},product:this.config.product},this.isBind?{hideSuccess:!0}:{},{language:mr.getLocale(),onError:this.handleInitError.bind(this)}),(function(r){e.captchaInstance=r,r.appendTo(t),r.onReady((function(){null==e.readyCallback||e.readyCallback()})).onSuccess((function(){null==e.successCallback||e.successCallback()})).onError(e.handleError.bind(e))}))},e.renderV3=function(t){var e=new XMLHttpRequest;e.addEventListener("load",this.v3Loaded.bind(this)),e.open("GET",f().forum.data.attributes.apiUrl),e.responseType="json",e.send()},e.v3Loaded=function(){console.log("v3 loaded")},e.handleInitError=function(t){this.handleError(t,Pr.lib("verify.init_error_message"))},e.handleError=function(t,e){void 0===e&&(e=Pr.lib("verify.error_message"));var r={type:"error",content:e+"："+t.code+" "+t.msg+" "+(t.desc.detail?"（"+t.desc.detail+"）":"")};this.errorCallback(r)},e.show=function(){return this.captchaInstance.showCaptcha()},e.reset=function(){return this.captchaInstance.reset()},e.getValidate=function(){return this.captchaInstance.getValidate()},t}();const Br=flarum.core.compat["forum/components/SignUpModal"];var Tr=r.n(Br);const Gr=flarum.core.compat["forum/components/ForgotPasswordModal"];var Nr=r.n(Gr);const zr=flarum.core.compat["forum/components/ChangePasswordModal"];var Vr=r.n(zr),Ur=function(t){var e=t.modal,r=t.contextEvent,o=t.dataMethod;(0,n.extend)(e.prototype,"oninit",(function(){var t=this,e=mr.getConfig(r);e&&(this.loading=!0,this.state=this.state||{},this.state.geetestCaptcha=new Mr(e,(function(){t.loaded()}),(function(){if(t.state.geetestCaptcha.isBind){var e=new Event("submit");e.__isBindSuccess=!0,t.onsubmit(e)}}),(function(e){t.loaded(),t.alertAttrs=e})))})),(0,n.extend)(e.prototype,o,(function(t){mr.getConfig(r)&&(t["ffans-geetest-result"]=this.state.geetestCaptcha.getValidate()||"")})),(0,n.extend)(e.prototype,"fields",(function(t){mr.getConfig(r)&&t.add("geetest",m(kr,{state:this.state.geetestCaptcha}),-5)})),(0,n.extend)(e.prototype,"onerror",(function(t,e){mr.getConfig(r)&&(this.state.geetestCaptcha.reset(),r!==l.LOGIN||!e.alert||e.alert.content&&e.alert.content.length||(e.alert.content=Pr.lib("verify.error_retry_message")))})),(0,n.override)(e.prototype,"onsubmit",(function(t,e){if(!mr.getConfig(r)||this.loading||!this.state.geetestCaptcha.isBind||"__isBindSuccess"in e&&e.__isBindSuccess)return t(e);try{this.state.geetestCaptcha.show()}finally{e.stopPropagation(),e.preventDefault()}}))};e().initializers.add("ffans/geetest",(function(){e().geetestLoaded=!1,Ur({modal:i(),contextEvent:l.LOGIN,dataMethod:"loginParams"}),Ur({modal:Tr(),contextEvent:l.SIGNUP,dataMethod:"submitData"}),Ur({modal:Nr(),contextEvent:l.FORGOT,dataMethod:"requestParams"}),Ur({modal:Vr(),contextEvent:l.FORGOT,dataMethod:"requestBody"})}))})(),module.exports={}})();
//# sourceMappingURL=forum.js.map
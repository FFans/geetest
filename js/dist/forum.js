/*! For license information please see forum.js.LICENSE.txt */
(()=>{var t={24:(t,e,r)=>{var n=r(735).default;function o(){"use strict";t.exports=o=function(){return r},t.exports.__esModule=!0,t.exports.default=t.exports;var e,r={},i=Object.prototype,a=i.hasOwnProperty,c=Object.defineProperty||function(t,e,r){t[e]=r.value},u="function"==typeof Symbol?Symbol:{},s=u.iterator||"@@iterator",f=u.asyncIterator||"@@asyncIterator",l=u.toStringTag||"@@toStringTag";function p(t,e,r){return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}),t[e]}try{p({},"")}catch(e){p=function(t,e,r){return t[e]=r}}function h(t,e,r,n){var o=e&&e.prototype instanceof j?e:j,i=Object.create(o.prototype),a=new F(n||[]);return c(i,"_invoke",{value:C(t,r,a)}),i}function d(t,e,r){try{return{type:"normal",arg:t.call(e,r)}}catch(t){return{type:"throw",arg:t}}}r.wrap=h;var v="suspendedStart",y="suspendedYield",g="executing",b="completed",m={};function j(){}function _(){}function w(){}var O={};p(O,s,(function(){return this}));var x=Object.getPrototypeOf,E=x&&x(x(B([])));E&&E!==i&&a.call(E,s)&&(O=E);var S=w.prototype=j.prototype=Object.create(O);function A(t){["next","throw","return"].forEach((function(e){p(t,e,(function(t){return this._invoke(e,t)}))}))}function P(t,e){function r(o,i,c,u){var s=d(t[o],t,i);if("throw"!==s.type){var f=s.arg,l=f.value;return l&&"object"==n(l)&&a.call(l,"__await")?e.resolve(l.__await).then((function(t){r("next",t,c,u)}),(function(t){r("throw",t,c,u)})):e.resolve(l).then((function(t){f.value=t,c(f)}),(function(t){return r("throw",t,c,u)}))}u(s.arg)}var o;c(this,"_invoke",{value:function(t,n){function i(){return new e((function(e,o){r(t,n,e,o)}))}return o=o?o.then(i,i):i()}})}function C(t,r,n){var o=v;return function(i,a){if(o===g)throw Error("Generator is already running");if(o===b){if("throw"===i)throw a;return{value:e,done:!0}}for(n.method=i,n.arg=a;;){var c=n.delegate;if(c){var u=L(c,n);if(u){if(u===m)continue;return u}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(o===v)throw o=b,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);o=g;var s=d(t,r,n);if("normal"===s.type){if(o=n.done?b:y,s.arg===m)continue;return{value:s.arg,done:n.done}}"throw"===s.type&&(o=b,n.method="throw",n.arg=s.arg)}}}function L(t,r){var n=r.method,o=t.iterator[n];if(o===e)return r.delegate=null,"throw"===n&&t.iterator.return&&(r.method="return",r.arg=e,L(t,r),"throw"===r.method)||"return"!==n&&(r.method="throw",r.arg=new TypeError("The iterator does not provide a '"+n+"' method")),m;var i=d(o,t.iterator,r.arg);if("throw"===i.type)return r.method="throw",r.arg=i.arg,r.delegate=null,m;var a=i.arg;return a?a.done?(r[t.resultName]=a.value,r.next=t.nextLoc,"return"!==r.method&&(r.method="next",r.arg=e),r.delegate=null,m):a:(r.method="throw",r.arg=new TypeError("iterator result is not an object"),r.delegate=null,m)}function I(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function k(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function F(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(I,this),this.reset(!0)}function B(t){if(t||""===t){var r=t[s];if(r)return r.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var o=-1,i=function r(){for(;++o<t.length;)if(a.call(t,o))return r.value=t[o],r.done=!1,r;return r.value=e,r.done=!0,r};return i.next=i}}throw new TypeError(n(t)+" is not iterable")}return _.prototype=w,c(S,"constructor",{value:w,configurable:!0}),c(w,"constructor",{value:_,configurable:!0}),_.displayName=p(w,l,"GeneratorFunction"),r.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===_||"GeneratorFunction"===(e.displayName||e.name))},r.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,w):(t.__proto__=w,p(t,l,"GeneratorFunction")),t.prototype=Object.create(S),t},r.awrap=function(t){return{__await:t}},A(P.prototype),p(P.prototype,f,(function(){return this})),r.AsyncIterator=P,r.async=function(t,e,n,o,i){void 0===i&&(i=Promise);var a=new P(h(t,e,n,o),i);return r.isGeneratorFunction(e)?a:a.next().then((function(t){return t.done?t.value:a.next()}))},A(S),p(S,l,"Generator"),p(S,s,(function(){return this})),p(S,"toString",(function(){return"[object Generator]"})),r.keys=function(t){var e=Object(t),r=[];for(var n in e)r.push(n);return r.reverse(),function t(){for(;r.length;){var n=r.pop();if(n in e)return t.value=n,t.done=!1,t}return t.done=!0,t}},r.values=B,F.prototype={constructor:F,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=e,this.done=!1,this.delegate=null,this.method="next",this.arg=e,this.tryEntries.forEach(k),!t)for(var r in this)"t"===r.charAt(0)&&a.call(this,r)&&!isNaN(+r.slice(1))&&(this[r]=e)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var r=this;function n(n,o){return c.type="throw",c.arg=t,r.next=n,o&&(r.method="next",r.arg=e),!!o}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return n("end");if(i.tryLoc<=this.prev){var u=a.call(i,"catchLoc"),s=a.call(i,"finallyLoc");if(u&&s){if(this.prev<i.catchLoc)return n(i.catchLoc,!0);if(this.prev<i.finallyLoc)return n(i.finallyLoc)}else if(u){if(this.prev<i.catchLoc)return n(i.catchLoc,!0)}else{if(!s)throw Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return n(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var n=this.tryEntries[r];if(n.tryLoc<=this.prev&&a.call(n,"finallyLoc")&&this.prev<n.finallyLoc){var o=n;break}}o&&("break"===t||"continue"===t)&&o.tryLoc<=e&&e<=o.finallyLoc&&(o=null);var i=o?o.completion:{};return i.type=t,i.arg=e,o?(this.method="next",this.next=o.finallyLoc,m):this.complete(i)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),m},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.finallyLoc===t)return this.complete(r.completion,r.afterLoc),k(r),m}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var r=this.tryEntries[e];if(r.tryLoc===t){var n=r.completion;if("throw"===n.type){var o=n.arg;k(r)}return o}}throw Error("illegal catch attempt")},delegateYield:function(t,r,n){return this.delegate={iterator:B(t),resultName:r,nextLoc:n},"next"===this.method&&(this.arg=e),m}},r}t.exports=o,t.exports.__esModule=!0,t.exports.default=t.exports},735:t=>{function e(r){return t.exports=e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},t.exports.__esModule=!0,t.exports.default=t.exports,e(r)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports},183:(t,e,r)=>{var n=r(24)();t.exports=n;try{regeneratorRuntime=n}catch(t){"object"==typeof globalThis?globalThis.regeneratorRuntime=n:Function("r","regeneratorRuntime = r")(n)}}},e={};function r(n){var o=e[n];if(void 0!==o)return o.exports;var i=e[n]={exports:{}};return t[n](i,i.exports,r),i.exports}r.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return r.d(e,{a:e}),e},r.d=(t,e)=>{for(var n in e)r.o(e,n)&&!r.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:e[n]})},r.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),(()=>{"use strict";const t=flarum.core.compat["forum/app"];var e=r.n(t);const n=flarum.core.compat["common/extend"],o=flarum.core.compat["forum/components/LogInModal"];var i=r.n(o);function a(t,e){return a=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},a(t,e)}function c(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,a(t,e)}function u(){return u=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var r=arguments[e];for(var n in r)({}).hasOwnProperty.call(r,n)&&(t[n]=r[n])}return t},u.apply(null,arguments)}const s=flarum.core.compat["common/app"];var f=r.n(s);const l=function(t,e){for(var r=-1,n=null==t?0:t.length,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o},p=function(t,e){return t===e||t!=t&&e!=e},h=function(t,e){for(var r=t.length;r--;)if(p(t[r][0],e))return r;return-1};var d=Array.prototype.splice;function v(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}v.prototype.clear=function(){this.__data__=[],this.size=0},v.prototype.delete=function(t){var e=this.__data__,r=h(e,t);return!(r<0||(r==e.length-1?e.pop():d.call(e,r,1),--this.size,0))},v.prototype.get=function(t){var e=this.__data__,r=h(e,t);return r<0?void 0:e[r][1]},v.prototype.has=function(t){return h(this.__data__,t)>-1},v.prototype.set=function(t,e){var r=this.__data__,n=h(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this};const y=v,g="object"==typeof global&&global&&global.Object===Object&&global;var b="object"==typeof self&&self&&self.Object===Object&&self;const j=g||b||Function("return this")(),_=j.Symbol;var w=Object.prototype,O=w.hasOwnProperty,x=w.toString,E=_?_.toStringTag:void 0;var S=Object.prototype.toString;var A=_?_.toStringTag:void 0;const P=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":A&&A in Object(t)?function(t){var e=O.call(t,E),r=t[E];try{t[E]=void 0;var n=!0}catch(t){}var o=x.call(t);return n&&(e?t[E]=r:delete t[E]),o}(t):function(t){return S.call(t)}(t)},C=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)},L=function(t){if(!C(t))return!1;var e=P(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e},I=j["__core-js_shared__"];var k,F=(k=/[^.]+$/.exec(I&&I.keys&&I.keys.IE_PROTO||""))?"Symbol(src)_1."+k:"";var B=Function.prototype.toString;const M=function(t){if(null!=t){try{return B.call(t)}catch(t){}try{return t+""}catch(t){}}return""};var T=/^\[object .+?Constructor\]$/,N=Function.prototype,z=Object.prototype,G=N.toString,V=z.hasOwnProperty,U=RegExp("^"+G.call(V).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const R=function(t){return!(!C(t)||(e=t,F&&F in e))&&(L(t)?U:T).test(M(t));var e},D=function(t,e){var r=function(t,e){return null==t?void 0:t[e]}(t,e);return R(r)?r:void 0},$=D(j,"Map"),X=D(Object,"create");var q=Object.prototype.hasOwnProperty;var W=Object.prototype.hasOwnProperty;function H(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}H.prototype.clear=function(){this.__data__=X?X(null):{},this.size=0},H.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},H.prototype.get=function(t){var e=this.__data__;if(X){var r=e[t];return"__lodash_hash_undefined__"===r?void 0:r}return q.call(e,t)?e[t]:void 0},H.prototype.has=function(t){var e=this.__data__;return X?void 0!==e[t]:W.call(e,t)},H.prototype.set=function(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=X&&void 0===e?"__lodash_hash_undefined__":e,this};const Y=H,J=function(t,e){var r,n,o=t.__data__;return("string"==(n=typeof(r=e))||"number"==n||"symbol"==n||"boolean"==n?"__proto__"!==r:null===r)?o["string"==typeof e?"string":"hash"]:o.map};function K(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}K.prototype.clear=function(){this.size=0,this.__data__={hash:new Y,map:new($||y),string:new Y}},K.prototype.delete=function(t){var e=J(this,t).delete(t);return this.size-=e?1:0,e},K.prototype.get=function(t){return J(this,t).get(t)},K.prototype.has=function(t){return J(this,t).has(t)},K.prototype.set=function(t,e){var r=J(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this};const Q=K;function Z(t){var e=this.__data__=new y(t);this.size=e.size}Z.prototype.clear=function(){this.__data__=new y,this.size=0},Z.prototype.delete=function(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r},Z.prototype.get=function(t){return this.__data__.get(t)},Z.prototype.has=function(t){return this.__data__.has(t)},Z.prototype.set=function(t,e){var r=this.__data__;if(r instanceof y){var n=r.__data__;if(!$||n.length<199)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new Q(n)}return r.set(t,e),this.size=r.size,this};const tt=Z,et=function(){try{var t=D(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),rt=function(t,e,r){"__proto__"==e&&et?et(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r};var nt=Object.prototype.hasOwnProperty;const ot=function(t,e,r){var n=t[e];nt.call(t,e)&&p(n,r)&&(void 0!==r||e in t)||rt(t,e,r)},it=function(t,e,r,n){var o=!r;r||(r={});for(var i=-1,a=e.length;++i<a;){var c=e[i],u=n?n(r[c],t[c],c,r,t):void 0;void 0===u&&(u=t[c]),o?rt(r,c,u):ot(r,c,u)}return r},at=function(t){return null!=t&&"object"==typeof t},ct=function(t){return at(t)&&"[object Arguments]"==P(t)};var ut=Object.prototype,st=ut.hasOwnProperty,ft=ut.propertyIsEnumerable;const lt=ct(function(){return arguments}())?ct:function(t){return at(t)&&st.call(t,"callee")&&!ft.call(t,"callee")},pt=Array.isArray;var ht="object"==typeof exports&&exports&&!exports.nodeType&&exports,dt=ht&&"object"==typeof module&&module&&!module.nodeType&&module,vt=dt&&dt.exports===ht?j.Buffer:void 0;const yt=(vt?vt.isBuffer:void 0)||function(){return!1};var gt=/^(?:0|[1-9]\d*)$/;const bt=function(t,e){var r=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==r||"symbol"!=r&&gt.test(t))&&t>-1&&t%1==0&&t<e},mt=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991};var jt={};jt["[object Float32Array]"]=jt["[object Float64Array]"]=jt["[object Int8Array]"]=jt["[object Int16Array]"]=jt["[object Int32Array]"]=jt["[object Uint8Array]"]=jt["[object Uint8ClampedArray]"]=jt["[object Uint16Array]"]=jt["[object Uint32Array]"]=!0,jt["[object Arguments]"]=jt["[object Array]"]=jt["[object ArrayBuffer]"]=jt["[object Boolean]"]=jt["[object DataView]"]=jt["[object Date]"]=jt["[object Error]"]=jt["[object Function]"]=jt["[object Map]"]=jt["[object Number]"]=jt["[object Object]"]=jt["[object RegExp]"]=jt["[object Set]"]=jt["[object String]"]=jt["[object WeakMap]"]=!1;const _t=function(t){return function(e){return t(e)}};var wt="object"==typeof exports&&exports&&!exports.nodeType&&exports,Ot=wt&&"object"==typeof module&&module&&!module.nodeType&&module,xt=Ot&&Ot.exports===wt&&g.process;const Et=function(){try{return Ot&&Ot.require&&Ot.require("util").types||xt&&xt.binding&&xt.binding("util")}catch(t){}}();var St=Et&&Et.isTypedArray;const At=St?_t(St):function(t){return at(t)&&mt(t.length)&&!!jt[P(t)]};var Pt=Object.prototype.hasOwnProperty;const Ct=function(t,e){var r=pt(t),n=!r&&lt(t),o=!r&&!n&&yt(t),i=!r&&!n&&!o&&At(t),a=r||n||o||i,c=a?function(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}(t.length,String):[],u=c.length;for(var s in t)!e&&!Pt.call(t,s)||a&&("length"==s||o&&("offset"==s||"parent"==s)||i&&("buffer"==s||"byteLength"==s||"byteOffset"==s)||bt(s,u))||c.push(s);return c};var Lt=Object.prototype;const It=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Lt)},kt=function(t,e){return function(r){return t(e(r))}},Ft=kt(Object.keys,Object);var Bt=Object.prototype.hasOwnProperty;const Mt=function(t){return null!=t&&mt(t.length)&&!L(t)},Tt=function(t){return Mt(t)?Ct(t):function(t){if(!It(t))return Ft(t);var e=[];for(var r in Object(t))Bt.call(t,r)&&"constructor"!=r&&e.push(r);return e}(t)};var Nt=Object.prototype.hasOwnProperty;const zt=function(t){if(!C(t))return function(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e}(t);var e=It(t),r=[];for(var n in t)("constructor"!=n||!e&&Nt.call(t,n))&&r.push(n);return r},Gt=function(t){return Mt(t)?Ct(t,!0):zt(t)};var Vt="object"==typeof exports&&exports&&!exports.nodeType&&exports,Ut=Vt&&"object"==typeof module&&module&&!module.nodeType&&module,Rt=Ut&&Ut.exports===Vt?j.Buffer:void 0,Dt=Rt?Rt.allocUnsafe:void 0;const $t=function(){return[]};var Xt=Object.prototype.propertyIsEnumerable,qt=Object.getOwnPropertySymbols;const Wt=qt?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var r=-1,n=null==t?0:t.length,o=0,i=[];++r<n;){var a=t[r];e(a,r,t)&&(i[o++]=a)}return i}(qt(t),(function(e){return Xt.call(t,e)})))}:$t,Ht=function(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t},Yt=kt(Object.getPrototypeOf,Object),Jt=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)Ht(e,Wt(t)),t=Yt(t);return e}:$t,Kt=function(t,e,r){var n=e(t);return pt(t)?n:Ht(n,r(t))},Qt=function(t){return Kt(t,Tt,Wt)},Zt=function(t){return Kt(t,Gt,Jt)},te=D(j,"DataView"),ee=D(j,"Promise"),re=D(j,"Set"),ne=D(j,"WeakMap");var oe="[object Map]",ie="[object Promise]",ae="[object Set]",ce="[object WeakMap]",ue="[object DataView]",se=M(te),fe=M($),le=M(ee),pe=M(re),he=M(ne),de=P;(te&&de(new te(new ArrayBuffer(1)))!=ue||$&&de(new $)!=oe||ee&&de(ee.resolve())!=ie||re&&de(new re)!=ae||ne&&de(new ne)!=ce)&&(de=function(t){var e=P(t),r="[object Object]"==e?t.constructor:void 0,n=r?M(r):"";if(n)switch(n){case se:return ue;case fe:return oe;case le:return ie;case pe:return ae;case he:return ce}return e});const ve=de;var ye=Object.prototype.hasOwnProperty;const ge=j.Uint8Array,be=function(t){var e=new t.constructor(t.byteLength);return new ge(e).set(new ge(t)),e};var me=/\w*$/;var je=_?_.prototype:void 0,_e=je?je.valueOf:void 0;const we=function(t,e,r){var n,o,i,a=t.constructor;switch(e){case"[object ArrayBuffer]":return be(t);case"[object Boolean]":case"[object Date]":return new a(+t);case"[object DataView]":return function(t,e){var r=e?be(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}(t,r);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return function(t,e){var r=e?be(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}(t,r);case"[object Map]":case"[object Set]":return new a;case"[object Number]":case"[object String]":return new a(t);case"[object RegExp]":return(i=new(o=t).constructor(o.source,me.exec(o))).lastIndex=o.lastIndex,i;case"[object Symbol]":return n=t,_e?Object(_e.call(n)):{}}};var Oe=Object.create;const xe=function(){function t(){}return function(e){if(!C(e))return{};if(Oe)return Oe(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}();var Ee=Et&&Et.isMap;const Se=Ee?_t(Ee):function(t){return at(t)&&"[object Map]"==ve(t)};var Ae=Et&&Et.isSet;const Pe=Ae?_t(Ae):function(t){return at(t)&&"[object Set]"==ve(t)};var Ce="[object Arguments]",Le="[object Function]",Ie="[object Object]",ke={};ke[Ce]=ke["[object Array]"]=ke["[object ArrayBuffer]"]=ke["[object DataView]"]=ke["[object Boolean]"]=ke["[object Date]"]=ke["[object Float32Array]"]=ke["[object Float64Array]"]=ke["[object Int8Array]"]=ke["[object Int16Array]"]=ke["[object Int32Array]"]=ke["[object Map]"]=ke["[object Number]"]=ke[Ie]=ke["[object RegExp]"]=ke["[object Set]"]=ke["[object String]"]=ke["[object Symbol]"]=ke["[object Uint8Array]"]=ke["[object Uint8ClampedArray]"]=ke["[object Uint16Array]"]=ke["[object Uint32Array]"]=!0,ke["[object Error]"]=ke[Le]=ke["[object WeakMap]"]=!1;const Fe=function t(e,r,n,o,i,a){var c,u=1&r,s=2&r,f=4&r;if(n&&(c=i?n(e,o,i,a):n(e)),void 0!==c)return c;if(!C(e))return e;var l=pt(e);if(l){if(c=function(t){var e=t.length,r=new t.constructor(e);return e&&"string"==typeof t[0]&&ye.call(t,"index")&&(r.index=t.index,r.input=t.input),r}(e),!u)return function(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}(e,c)}else{var p=ve(e),h=p==Le||"[object GeneratorFunction]"==p;if(yt(e))return function(t,e){if(e)return t.slice();var r=t.length,n=Dt?Dt(r):new t.constructor(r);return t.copy(n),n}(e,u);if(p==Ie||p==Ce||h&&!i){if(c=s||h?{}:function(t){return"function"!=typeof t.constructor||It(t)?{}:xe(Yt(t))}(e),!u)return s?function(t,e){return it(t,Jt(t),e)}(e,function(t,e){return t&&it(e,Gt(e),t)}(c,e)):function(t,e){return it(t,Wt(t),e)}(e,function(t,e){return t&&it(e,Tt(e),t)}(c,e))}else{if(!ke[p])return i?e:{};c=we(e,p,u)}}a||(a=new tt);var d=a.get(e);if(d)return d;a.set(e,c),Pe(e)?e.forEach((function(o){c.add(t(o,r,n,o,e,a))})):Se(e)&&e.forEach((function(o,i){c.set(i,t(o,r,n,i,e,a))}));var v=l?void 0:(f?s?Zt:Qt:s?Gt:Tt)(e);return function(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&!1!==e(t[r],r,t););}(v||e,(function(o,i){v&&(o=e[i=o]),ot(c,i,t(o,r,n,i,e,a))})),c},Be=function(t){return"symbol"==typeof t||at(t)&&"[object Symbol]"==P(t)};var Me=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Te=/^\w*$/;function Ne(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var r=function r(){var n=arguments,o=e?e.apply(this,n):n[0],i=r.cache;if(i.has(o))return i.get(o);var a=t.apply(this,n);return r.cache=i.set(o,a)||i,a};return r.cache=new(Ne.Cache||Q),r}Ne.Cache=Q;var ze=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ge=/\\(\\)?/g;const Ve=(Ue=Ne((function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(ze,(function(t,r,n,o){e.push(n?o.replace(Ge,"$1"):r||t)})),e}),(function(t){return 500===Re.size&&Re.clear(),t})),Re=Ue.cache,Ue);var Ue,Re,De=_?_.prototype:void 0,$e=De?De.toString:void 0;const Xe=function t(e){if("string"==typeof e)return e;if(pt(e))return l(e,t)+"";if(Be(e))return $e?$e.call(e):"";var r=e+"";return"0"==r&&1/e==-1/0?"-0":r},qe=function(t){return null==t?"":Xe(t)},We=function(t,e){return pt(t)?t:function(t,e){if(pt(t))return!1;var r=typeof t;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=t&&!Be(t))||Te.test(t)||!Me.test(t)||null!=e&&t in Object(e)}(t,e)?[t]:Ve(qe(t))},He=function(t){if("string"==typeof t||Be(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e},Ye=function(t,e){return e.length<2?t:function(t,e){for(var r=0,n=(e=We(e,t)).length;null!=t&&r<n;)t=t[He(e[r++])];return r&&r==n?t:void 0}(t,function(t,e,r){var n=-1,o=t.length;e<0&&(e=-e>o?0:o+e),(r=r>o?o:r)<0&&(r+=o),o=e>r?0:r-e>>>0,e>>>=0;for(var i=Array(o);++n<o;)i[n]=t[n+e];return i}(e,0,-1))},Je=function(t,e){return e=We(e,t),null==(t=Ye(t,e))||delete t[He((r=e,n=null==r?0:r.length,n?r[n-1]:void 0))];var r,n};var Ke=Function.prototype,Qe=Object.prototype,Ze=Ke.toString,tr=Qe.hasOwnProperty,er=Ze.call(Object);const rr=function(t){return function(t){if(!at(t)||"[object Object]"!=P(t))return!1;var e=Yt(t);if(null===e)return!0;var r=tr.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&Ze.call(r)==er}(t)?void 0:t};var nr=_?_.isConcatSpreadable:void 0;const or=function(t){return pt(t)||lt(t)||!!(nr&&t&&t[nr])},ir=function t(e,r,n,o,i){var a=-1,c=e.length;for(n||(n=or),i||(i=[]);++a<c;){var u=e[a];r>0&&n(u)?r>1?t(u,r-1,n,o,i):Ht(i,u):o||(i[i.length]=u)}return i},ar=function(t){return null!=t&&t.length?ir(t,1):[]};var cr=Math.max;const ur=et?function(t,e){return et(t,"toString",{configurable:!0,enumerable:!1,value:(r=e,function(){return r}),writable:!0});var r}:function(t){return t};var sr=Date.now;const fr=(lr=ur,pr=0,hr=0,function(){var t=sr(),e=16-(t-hr);if(hr=t,e>0){if(++pr>=800)return arguments[0]}else pr=0;return lr.apply(void 0,arguments)});var lr,pr,hr;const dr=function(t){return fr(function(t,e,r){return e=cr(void 0===e?t.length-1:e,0),function(){for(var n=arguments,o=-1,i=cr(n.length-e,0),a=Array(i);++o<i;)a[o]=n[e+o];o=-1;for(var c=Array(e+1);++o<e;)c[o]=n[o];return c[e]=r(a),function(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}(t,this,c)}}(t,void 0,ar),t+"")}((function(t,e){var r={};if(null==t)return r;var n=!1;e=l(e,(function(e){return e=We(e,t),n||(n=e.length>1),e})),it(t,Zt(t),r),n&&(r=Fe(r,7,rr));for(var o=e.length;o--;)Je(r,e[o]);return r}));var vr=["product","id","key"],yr=[].concat(vr,"productService","login","signup","forgot"),gr=function(){function t(){}return t.getAssetsPath=function(){return f().forum.data.attributes.assetsBaseUrl+"/extensions/"+this.PREFIX},t.getLocale=function(){return f().data.locale},t.getPath=function(t){return t?this.PREFIX+"."+t:this.PREFIX},t.get=function(t){return f().forum.attribute(this.getPath(t))},t.isEnabled=function(t){return this.get(t)},t.isStandalone=function(t){return this.get(t+".standalone")},t.isConfigured=function(t){return this.get((t?t+".":"")+"configured")},t.getDefaultConfig=function(){var t=this;return dr(yr.reduce((function(e,r){return e[r]=t.get(r),e}),{}),["key"])},t.getContextEventConfig=function(t){var e=this;return u({productService:this.getDefaultConfig().productService},dr(vr.reduce((function(r,n){return r[n]=e.get(t+"."+n),r}),{}),["key"]))},t.getConfig=function(t){return!!this.isEnabled(t)&&(this.isStandalone(t)&&this.isConfigured(t)?this.getContextEventConfig(t):!!this.isConfigured()&&this.getDefaultConfig())},t}();gr.PREFIX="ffans-geetest";var br=function(t){function e(){return t.apply(this,arguments)||this}return c(e,t),e}(gr);function mr(t,e,r,n,o,i,a){try{var c=t[i](a),u=c.value}catch(t){return void r(t)}c.done?e(u):Promise.resolve(u).then(n,o)}var jr=r(183),_r=r.n(jr);const wr=flarum.core.compat["common/Component"];var Or=r.n(wr);const xr=function(){function t(t){return function(e){return new Promise((function(r,n){var o=document.createElement(t),i="body",a="src";switch(o.onload=function(){r(e)},o.onerror=function(){n(e)},t){case"script":o.async=!0;break;case"link":o.type="text/css",o.rel="stylesheet",a="href",i="head"}o[a]=e,document[i].appendChild(o)}))}}return{css:t("link"),js:t("script"),img:t("img")}}(),Er={get:function(t,e){return f().translator.trans(t,e)},admin:function(t,e){return this.get(gr.PREFIX+".admin."+t,e)},forum:function(t,e){return this.get(gr.PREFIX+".forum."+t,e)},lib:function(t,e){return this.get(gr.PREFIX+".lib."+t,e)}};var Sr,Ar=function(t){return t.V4="v4",t.V3="v3",t}({}),Pr=((Sr={})[Ar.V4]="gt4",Sr[Ar.V3]="gt.0.4.9",Sr),Cr=function(t){return t.V4="initGeetest4",t.V3="initGeetest",t}({});function Lr(){var t;return t=_r().mark((function t(e){return _r().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(console.log("[productService]",e),!f().geetestLoaded){t.next=3;break}return t.abrupt("return");case 3:return t.next=5,xr.js(gr.getAssetsPath()+"/"+Pr[e]+".js");case 5:f().geetestLoaded=!0;case 6:case"end":return t.stop()}}),t)})),Lr=function(){var e=this,r=arguments;return new Promise((function(n,o){var i=t.apply(e,r);function a(t){mr(i,n,o,a,c,"next",t)}function c(t){mr(i,n,o,a,c,"throw",t)}a(void 0)}))},Lr.apply(this,arguments)}var Ir=function(t){function e(){return t.apply(this,arguments)||this}c(e,t);var r=e.prototype;return r.oninit=function(e){t.prototype.oninit.call(this,e)},r.view=function(){return m("div",Object.assign({className:"Form-group geetest-captcha"},dr(this.attrs,["state"])))},r.oncreate=function(e){var r=this;t.prototype.oncreate.call(this,e),function(t){return Lr.apply(this,arguments)}(this.attrs.state.config.productService).then((function(){var t=setInterval((function(){(window[Cr.V4]||window[Cr.V3])&&(clearInterval(t),r.attrs.state.render(e.dom))}),250)}))},e}(Or()),kr=function(t){return t.FLOAT="float",t.POPUP="popup",t.BIND="bind",t}({}),Fr=function(){function t(t,e,r,n){this.isNotBind=!1,this.isBind=!1,this.config=void 0,this.readyCallback=void 0,this.successCallback=void 0,this.errorCallback=function(t){f().alerts.show(t)},this.captchaInstance=void 0,this.config=t,this.readyCallback=e,this.successCallback=r,this.errorCallback=n||this.errorCallback,this.isNotBind=this.config.product!==kr.BIND,this.isBind=!this.isNotBind}var e=t.prototype;return e.render=function(t){switch(console.log("render",this.config.productService),this.config.productService){case Ar.V4:this.renderV4(t);break;case Ar.V3:this.renderV3(t)}},e.renderV4=function(t){var e=this;null==window.initGeetest4||window.initGeetest4(u({captchaId:this.config.id,nativeButton:{width:"100%"},product:this.config.product},this.isBind?{hideSuccess:!0}:{},{language:br.getLocale(),onError:this.handleInitError.bind(this)}),(function(r){console.log("[captcha]",r),e.captchaInstance=r,r.appendTo(t),r.onReady((function(){null==e.readyCallback||e.readyCallback()})).onSuccess((function(){null==e.successCallback||e.successCallback()})).onError(e.handleError.bind(e))}))},e.renderV3=function(t){var e=new XMLHttpRequest;e.addEventListener("load",this.v3Loaded.bind(this)),e.open("GET",f().forum.data.attributes.apiUrl),e.responseType="json",e.send()},e.v3Loaded=function(){console.log("v3 loaded")},e.handleInitError=function(t){this.handleError(t,Er.lib("verify.init_error_message"))},e.handleError=function(t,e){void 0===e&&(e=Er.lib("verify.error_message")),console.log("[error]",t);var r={type:"error",content:e+"："+t.code+" "+t.msg+" "+(t.desc.detail?"（"+t.desc.detail+"）":"")};this.errorCallback(r)},e.show=function(){return this.captchaInstance.showCaptcha()},e.reset=function(){return this.captchaInstance.reset()},e.getValidate=function(){return this.captchaInstance.getValidate()},t}();const Br=flarum.core.compat["forum/components/SignUpModal"];var Mr=r.n(Br);const Tr=flarum.core.compat["forum/components/ForgotPasswordModal"];var Nr=r.n(Tr),zr=function(t){return t.SIGNUP="signup",t.LOGIN="login",t.FORGOT="forgot",t}({}),Gr=function(t){var e=t.modal,r=t.contextEvent,o=t.dataMethod;(0,n.extend)(e.prototype,"oninit",(function(){var t=this,e=br.getConfig(r);console.log("[config]",r,e),e&&(this.loading=!0,this.state=this.state||{},this.state.geetestCaptcha=new Fr(e,(function(){t.loaded()}),(function(){if(t.state.geetestCaptcha.isBind){var e=new Event("submit");e.__isBindSuccess=!0,t.onsubmit(e)}}),(function(e){t.loaded(),t.alertAttrs=e})),console.log("[state.geetestCaptcha]",this.state.geetestCaptcha))})),(0,n.extend)(e.prototype,o,(function(t){br.getConfig(r)&&(t["ffans-geetest-result"]=this.state.geetestCaptcha.getValidate()||"")})),(0,n.extend)(e.prototype,"fields",(function(t){br.getConfig(r)&&t.add("geetest",m(Ir,{state:this.state.geetestCaptcha}),-5)})),(0,n.extend)(e.prototype,"onerror",(function(t,e){br.getConfig(r)&&(this.state.geetestCaptcha.reset(),r!==zr.LOGIN||!e.alert||e.alert.content&&e.alert.content.length||(e.alert.content=Er.lib("verify.error_retry_message")))})),(0,n.override)(e.prototype,"onsubmit",(function(t,e){if(!br.getConfig(r)||this.loading||!this.state.geetestCaptcha.isBind||"__isBindSuccess"in e&&e.__isBindSuccess)return t(e);try{this.state.geetestCaptcha.show()}finally{e.stopPropagation(),e.preventDefault(),console.log("isBind")}}))};e().initializers.add("ffans/geetest",(function(){console.log("[ffans/geetest] Hello, forum!"),e().geetestLoaded=!1,Gr({modal:i(),contextEvent:zr.LOGIN,dataMethod:"loginParams"}),Gr({modal:Mr(),contextEvent:zr.SIGNUP,dataMethod:"submitData"}),Gr({modal:Nr(),contextEvent:zr.FORGOT,dataMethod:"requestParams"})}))})(),module.exports={}})();
//# sourceMappingURL=forum.js.map